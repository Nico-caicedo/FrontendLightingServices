import{r as d,c as A,k as V,l as C,m as t,f as l,Q as k,n as g,x as s,t as c,ao as P,p as y,a6 as S,y as B,az as D,an as N,a1 as z}from"./index-CPZClO88.js";import{Q as v}from"./QMarkupTable-CDTfQPvq.js";import{Q as I}from"./QTd-DZS8hez3.js";import{Q as $}from"./QTable-Bw_aTjQQ.js";import{Q as j}from"./QPage-B5_if6o9.js";import{C as E}from"./ClosePopup-CEJqwLM8.js";import"./selection-BEwD1R3a.js";import"./format-DyQxkAtJ.js";const H={class:"row items-center justify-between q-mb-md"},O={class:"row q-col-gutter-md q-mb-md"},T={class:"q-gutter-md"},Z={__name:"InventarioPage",setup(F){const f=["Luminarias","Collarines","Brazos","Fotoceldas","Cableado","Herrajes","Otros"],b=["Assic – Nautilus","Alutrafic","Celsa","Imporled","Mercury","RoyAlpha","Sylvania"],i=d({busqueda:"",categoria:null,marca:null}),n=d([{id:1,codigo:"LUM100",nombre:"Luminaria LED 100W",categoria:"Luminarias",marca:"RoyAlpha",stock:25,precio:18e4},{id:2,codigo:"COL015",nombre:"Collarín galvanizado 1.5”",categoria:"Herrajes",marca:null,stock:10,precio:9500},{id:3,codigo:"LUM102",nombre:"Luminaria LED 50W",categoria:"Luminarias",marca:"Sylvania",stock:25,precio:18e4},{id:4,codigo:"COL016",nombre:"Collarín galvanizado 2.0”",categoria:"Herrajes",marca:null,stock:50,precio:9500}]),w=[{name:"codigo",label:"Código",field:"codigo",align:"left"},{name:"nombre",label:"Material",field:"nombre",align:"left"},{name:"categoria",label:"Categoría",field:"categoria",align:"left"},{name:"marca",label:"Marca",field:"marca",align:"left"},{name:"stock",label:"Stock",field:"stock",align:"center"},{name:"precio",label:"Costo Unitario",field:"precio",align:"right",format:r=>`$${r.toLocaleString()}`},{name:"acciones",label:"Acciones",align:"center"}],L=d({rowsPerPage:10}),Q=A(()=>n.value.filter(r=>{const e=r.nombre.toLowerCase().includes(i.value.busqueda.toLowerCase())||r.codigo.toLowerCase().includes(i.value.busqueda.toLowerCase()),a=!i.value.categoria||r.categoria===i.value.categoria,p=!i.value.marca||r.marca===i.value.marca;return e&&a&&p})),u=d(!1),o=d({}),m=d(!1),U=()=>{o.value={nombre:"",codigo:"",categoria:"",marca:null,stock:0,precio:0},m.value=!1,u.value=!0},q=r=>{o.value={...r},m.value=!0,u.value=!0},x=()=>{if(m.value){const r=n.value.findIndex(e=>e.id===o.value.id);r!==-1&&(n.value[r]={...o.value})}else o.value.id=Date.now(),n.value.push({...o.value});u.value=!1},M=r=>{n.value=n.value.filter(e=>e.id!==r.id)};return(r,e)=>(C(),V(j,{class:"q-pa-md bg-grey-2"},{default:t(()=>[l(k,{flat:"",bordered:"",class:"q-pa-md"},{default:t(()=>[g("div",H,[e[10]||(e[10]=g("div",{class:"text-h5 text-primary"}," Inventario de Materiales ",-1)),l(s,{color:"primary",icon:"add",label:"Agregar material",onClick:U,unelevated:""})]),g("div",O,[l(c,{filled:"",modelValue:i.value.busqueda,"onUpdate:modelValue":e[0]||(e[0]=a=>i.value.busqueda=a),label:"Buscar por nombre o código",dense:"",class:"col-12 col-md-4"},null,8,["modelValue"]),l(v,{filled:"",modelValue:i.value.categoria,"onUpdate:modelValue":e[1]||(e[1]=a=>i.value.categoria=a),options:f,label:"Categoría",dense:"",clearable:"",class:"col-12 col-md-3"},null,8,["modelValue"]),l(v,{filled:"",modelValue:i.value.marca,"onUpdate:modelValue":e[2]||(e[2]=a=>i.value.marca=a),options:b,label:"Marca",dense:"",clearable:"",class:"col-12 col-md-3"},null,8,["modelValue"])]),l($,{rows:Q.value,columns:w,"row-key":"id",flat:"",bordered:"",dense:"",pagination:L.value},{"body-cell-acciones":t(a=>[l(I,{align:"center"},{default:t(()=>[l(s,{icon:"edit",size:"sm",color:"primary",flat:"",round:"",onClick:p=>q(a.row)},null,8,["onClick"]),l(s,{icon:"delete",size:"sm",color:"negative",flat:"",round:"",onClick:p=>M(a.row)},null,8,["onClick"])]),_:2},1024)]),_:1},8,["rows","pagination"])]),_:1}),l(P,{modelValue:u.value,"onUpdate:modelValue":e[9]||(e[9]=a=>u.value=a),persistent:""},{default:t(()=>[l(k,{style:{"min-width":"400px"}},{default:t(()=>[l(y,{class:"text-h6"},{default:t(()=>[S(B(m.value?"Editar material":"Agregar material"),1)]),_:1}),l(y,null,{default:t(()=>[g("div",T,[l(c,{modelValue:o.value.nombre,"onUpdate:modelValue":e[3]||(e[3]=a=>o.value.nombre=a),label:"Nombre del material",filled:"",dense:""},null,8,["modelValue"]),l(c,{modelValue:o.value.codigo,"onUpdate:modelValue":e[4]||(e[4]=a=>o.value.codigo=a),label:"Código",filled:"",dense:""},null,8,["modelValue"]),l(v,{modelValue:o.value.categoria,"onUpdate:modelValue":e[5]||(e[5]=a=>o.value.categoria=a),options:f,label:"Categoría",filled:"",dense:""},null,8,["modelValue"]),o.value.categoria==="Luminarias"?(C(),V(v,{key:0,modelValue:o.value.marca,"onUpdate:modelValue":e[6]||(e[6]=a=>o.value.marca=a),options:b,label:"Marca",filled:"",dense:""},null,8,["modelValue"])):D("",!0),l(c,{modelValue:o.value.stock,"onUpdate:modelValue":e[7]||(e[7]=a=>o.value.stock=a),modelModifiers:{number:!0},label:"Stock disponible",type:"number",filled:"",dense:""},null,8,["modelValue"]),l(c,{modelValue:o.value.precio,"onUpdate:modelValue":e[8]||(e[8]=a=>o.value.precio=a),modelModifiers:{number:!0},label:"Costo unitario",prefix:"$",type:"number",filled:"",dense:""},null,8,["modelValue"])])]),_:1}),l(N,{align:"right"},{default:t(()=>[z(l(s,{flat:"",label:"Cancelar",color:"grey"},null,512),[[E]]),l(s,{color:"primary",label:"Guardar",onClick:x})]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1}))}};export{Z as default};
