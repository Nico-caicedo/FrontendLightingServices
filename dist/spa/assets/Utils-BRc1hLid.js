import{aZ as P,a_ as k,a$ as U,c as Z,P as $,aX as b,b0 as O}from"./index-CPZClO88.js";import{p as f,c as B}from"./format-DyQxkAtJ.js";import{api as w}from"./axios-V1RskCk-.js";const N=864e5,j=36e5,A=6e4,_="YYYY-MM-DDTHH:mm:ss.SSSZ",W=/\[((?:[^\]\\]|\\]|\\)*)\]|do|d{1,4}|Mo|M{1,4}|m{1,2}|wo|w{1,2}|Qo|Do|DDDo|D{1,4}|YY(?:YY)?|H{1,2}|h{1,2}|s{1,2}|S{1,3}|Z{1,2}|a{1,2}|[AQExX]/g,V=/(\[[^\]]*\])|do|d{1,4}|Mo|M{1,4}|m{1,2}|wo|w{1,2}|Qo|Do|DDDo|D{1,4}|YY(?:YY)?|H{1,2}|h{1,2}|s{1,2}|S{1,3}|Z{1,2}|a{1,2}|[AQExX]|([.*+:?^,\s${}()|\\]+)/g,C={};function X(e,t){const n="("+t.days.join("|")+")",r=e+n;if(C[r]!==void 0)return C[r];const o="("+t.daysShort.join("|")+")",a="("+t.months.join("|")+")",c="("+t.monthsShort.join("|")+")",l={};let s=0;const g=e.replace(V,u=>{switch(s++,u){case"YY":return l.YY=s,"(-?\\d{1,2})";case"YYYY":return l.YYYY=s,"(-?\\d{1,4})";case"M":return l.M=s,"(\\d{1,2})";case"Mo":return l.M=s++,"(\\d{1,2}(st|nd|rd|th))";case"MM":return l.M=s,"(\\d{2})";case"MMM":return l.MMM=s,c;case"MMMM":return l.MMMM=s,a;case"D":return l.D=s,"(\\d{1,2})";case"Do":return l.D=s++,"(\\d{1,2}(st|nd|rd|th))";case"DD":return l.D=s,"(\\d{2})";case"H":return l.H=s,"(\\d{1,2})";case"HH":return l.H=s,"(\\d{2})";case"h":return l.h=s,"(\\d{1,2})";case"hh":return l.h=s,"(\\d{2})";case"m":return l.m=s,"(\\d{1,2})";case"mm":return l.m=s,"(\\d{2})";case"s":return l.s=s,"(\\d{1,2})";case"ss":return l.s=s,"(\\d{2})";case"S":return l.S=s,"(\\d{1})";case"SS":return l.S=s,"(\\d{2})";case"SSS":return l.S=s,"(\\d{3})";case"A":return l.A=s,"(AM|PM)";case"a":return l.a=s,"(am|pm)";case"aa":return l.aa=s,"(a\\.m\\.|p\\.m\\.)";case"ddd":return o;case"dddd":return n;case"Q":case"d":case"E":return"(\\d{1})";case"do":return s++,"(\\d{1}(st|nd|rd|th))";case"Qo":return"(1st|2nd|3rd|4th)";case"DDD":case"DDDD":return"(\\d{1,3})";case"DDDo":return s++,"(\\d{1,3}(st|nd|rd|th))";case"w":return"(\\d{1,2})";case"wo":return s++,"(\\d{1,2}(st|nd|rd|th))";case"ww":return"(\\d{2})";case"Z":return l.Z=s,"(Z|[+-]\\d{2}:\\d{2})";case"ZZ":return l.ZZ=s,"(Z|[+-]\\d{2}\\d{2})";case"X":return l.X=s,"(-?\\d+)";case"x":return l.x=s,"(-?\\d{4,})";default:return s--,u[0]==="["&&(u=u.substring(1,u.length-1)),u.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}}),i={map:l,regex:new RegExp("^"+g)};return C[r]=i,i}function H(e,t){return e!==void 0?e:t!==void 0?t.date:U.date}function F(e,t=""){const n=e>0?"-":"+",r=Math.abs(e),o=Math.floor(r/60),a=r%60;return n+f(o)+t+f(a)}function Q(e,t,n){let r=e.getFullYear(),o=e.getMonth();const a=e.getDate();return t.year!==void 0&&(r+=n*t.year,delete t.year),t.month!==void 0&&(o+=n*t.month,delete t.month),e.setDate(1),e.setMonth(2),e.setFullYear(r),e.setMonth(o),e.setDate(Math.min(a,I(e))),t.date!==void 0&&(e.setDate(e.getDate()+n*t.date),delete t.date),e}function G(e,t,n){const r=t.year!==void 0?t.year:e[`get${n}FullYear`](),o=t.month!==void 0?t.month-1:e[`get${n}Month`](),a=new Date(r,o+1,0).getDate(),c=Math.min(a,t.date!==void 0?t.date:e[`get${n}Date`]());return e[`set${n}Date`](1),e[`set${n}Month`](2),e[`set${n}FullYear`](r),e[`set${n}Month`](o),e[`set${n}Date`](c),delete t.year,delete t.month,delete t.date,e}function E(e,t,n){const r=L(t),o=new Date(e),a=r.year!==void 0||r.month!==void 0||r.date!==void 0?Q(o,r,n):o;for(const c in r){const l=B(c);a[`set${l}`](a[`get${l}`]()+n*r[c])}return a}function L(e){const t={...e};return e.years!==void 0&&(t.year=e.years,delete t.years),e.months!==void 0&&(t.month=e.months,delete t.months),e.days!==void 0&&(t.date=e.days,delete t.days),e.day!==void 0&&(t.date=e.day,delete t.day),e.hour!==void 0&&(t.hours=e.hour,delete t.hour),e.minute!==void 0&&(t.minutes=e.minute,delete t.minute),e.second!==void 0&&(t.seconds=e.second,delete t.second),e.millisecond!==void 0&&(t.milliseconds=e.millisecond,delete t.millisecond),t}function q(e,t,n){const r=L(t),o=n===!0?"UTC":"",a=new Date(e),c=r.year!==void 0||r.month!==void 0||r.date!==void 0?G(a,r,o):a;for(const l in r){const s=l.charAt(0).toUpperCase()+l.slice(1);c[`set${o}${s}`](r[l])}return c}function J(e,t,n){const r=K(e,t,n),o=new Date(r.year,r.month===null?null:r.month-1,r.day===null?1:r.day,r.hour,r.minute,r.second,r.millisecond),a=o.getTimezoneOffset();return r.timezoneOffset===null||r.timezoneOffset===a?o:E(o,{minutes:r.timezoneOffset-a},1)}function K(e,t,n,r,o){const a={year:null,month:null,day:null,hour:null,minute:null,second:null,millisecond:null,timezoneOffset:null,dateHash:null,timeHash:null};if(e==null||e===""||typeof e!="string")return a;t===void 0&&(t=_);const c=H(n,P.props),l=c.months,s=c.monthsShort,{regex:g,map:i}=X(t,c),u=e.match(g);if(u===null)return a;let p="";if(i.X!==void 0||i.x!==void 0){const m=parseInt(u[i.X!==void 0?i.X:i.x],10);if(isNaN(m)===!0||m<0)return a;const d=new Date(m*(i.X!==void 0?1e3:1));a.year=d.getFullYear(),a.month=d.getMonth()+1,a.day=d.getDate(),a.hour=d.getHours(),a.minute=d.getMinutes(),a.second=d.getSeconds(),a.millisecond=d.getMilliseconds()}else{if(i.YYYY!==void 0)a.year=parseInt(u[i.YYYY],10);else if(i.YY!==void 0){const m=parseInt(u[i.YY],10);a.year=m<0?m:2e3+m}if(i.M!==void 0){if(a.month=parseInt(u[i.M],10),a.month<1||a.month>12)return a}else i.MMM!==void 0?a.month=s.indexOf(u[i.MMM])+1:i.MMMM!==void 0&&(a.month=l.indexOf(u[i.MMMM])+1);if(i.D!==void 0){if(a.day=parseInt(u[i.D],10),a.year===null||a.month===null||a.day<1)return a;const m=new Date(a.year,a.month,0).getDate();if(a.day>m)return a}i.H!==void 0?a.hour=parseInt(u[i.H],10)%24:i.h!==void 0&&(a.hour=parseInt(u[i.h],10)%12,(i.A&&u[i.A]==="PM"||i.a&&u[i.a]==="pm"||i.aa&&u[i.aa]==="p.m.")&&(a.hour+=12),a.hour=a.hour%24),i.m!==void 0&&(a.minute=parseInt(u[i.m],10)%60),i.s!==void 0&&(a.second=parseInt(u[i.s],10)%60),i.S!==void 0&&(a.millisecond=parseInt(u[i.S],10)*10**(3-u[i.S].length)),(i.Z!==void 0||i.ZZ!==void 0)&&(p=i.Z!==void 0?u[i.Z].replace(":",""):u[i.ZZ],a.timezoneOffset=(p[0]==="+"?-1:1)*(60*p.slice(1,3)+1*p.slice(3,5)))}return a.dateHash=f(a.year,4)+"/"+f(a.month)+"/"+f(a.day),a.timeHash=f(a.hour)+":"+f(a.minute)+":"+f(a.second)+p,a}function ee(e){return typeof e=="number"?!0:isNaN(Date.parse(e))===!1}function te(e,t){return q(new Date,e,t)}function re(e){const t=new Date(e).getDay();return t===0?7:t}function S(e){const t=new Date(e.getFullYear(),e.getMonth(),e.getDate());t.setDate(t.getDate()-(t.getDay()+6)%7+3);const n=new Date(t.getFullYear(),0,4);n.setDate(n.getDate()-(n.getDay()+6)%7+3);const r=t.getTimezoneOffset()-n.getTimezoneOffset();t.setHours(t.getHours()-r);const o=(t-n)/(N*7);return 1+Math.floor(o)}function ne(e){return e.getFullYear()*1e4+e.getMonth()*100+e.getDate()}function x(e,t){const n=new Date(e);return t===!0?ne(n):n.getTime()}function oe(e,t,n,r={}){const o=x(t,r.onlyDate),a=x(n,r.onlyDate),c=x(e,r.onlyDate);return(c>o||r.inclusiveFrom===!0&&c===o)&&(c<a||r.inclusiveTo===!0&&c===a)}function ae(e,t){return E(e,t,1)}function se(e,t){return E(e,t,-1)}function D(e,t,n){const r=new Date(e),o=`set${n===!0?"UTC":""}`;switch(t){case"year":case"years":r[`${o}Month`](0);case"month":case"months":r[`${o}Date`](1);case"day":case"days":case"date":r[`${o}Hours`](0);case"hour":case"hours":r[`${o}Minutes`](0);case"minute":case"minutes":r[`${o}Seconds`](0);case"second":case"seconds":r[`${o}Milliseconds`](0)}return r}function ie(e,t,n){const r=new Date(e),o=`set${n===!0?"UTC":""}`;switch(t){case"year":case"years":r[`${o}Month`](11);case"month":case"months":r[`${o}Date`](I(r));case"day":case"days":case"date":r[`${o}Hours`](23);case"hour":case"hours":r[`${o}Minutes`](59);case"minute":case"minutes":r[`${o}Seconds`](59);case"second":case"seconds":r[`${o}Milliseconds`](999)}return r}function ce(e){let t=new Date(e);return Array.prototype.slice.call(arguments,1).forEach(n=>{t=Math.max(t,new Date(n))}),t}function le(e){let t=new Date(e);return Array.prototype.slice.call(arguments,1).forEach(n=>{t=Math.min(t,new Date(n))}),t}function v(e,t,n){return(e.getTime()-e.getTimezoneOffset()*A-(t.getTime()-t.getTimezoneOffset()*A))/n}function R(e,t,n="days"){const r=new Date(e),o=new Date(t);switch(n){case"years":case"year":return r.getFullYear()-o.getFullYear();case"months":case"month":return(r.getFullYear()-o.getFullYear())*12+r.getMonth()-o.getMonth();case"days":case"day":case"date":return v(D(r,"day"),D(o,"day"),N);case"hours":case"hour":return v(D(r,"hour"),D(o,"hour"),j);case"minutes":case"minute":return v(D(r,"minute"),D(o,"minute"),A);case"seconds":case"second":return v(D(r,"second"),D(o,"second"),1e3)}}function Y(e){return R(e,D(e,"year"),"days")+1}function ue(e){return k(e)===!0?"date":typeof e=="number"?"number":"string"}function de(e,t,n){const r=new Date(e);if(t){const o=new Date(t);if(r<o)return o}if(n){const o=new Date(n);if(r>o)return o}return r}function me(e,t,n){const r=new Date(e),o=new Date(t);if(n===void 0)return r.getTime()===o.getTime();switch(n){case"second":case"seconds":if(r.getSeconds()!==o.getSeconds())return!1;case"minute":case"minutes":if(r.getMinutes()!==o.getMinutes())return!1;case"hour":case"hours":if(r.getHours()!==o.getHours())return!1;case"day":case"days":case"date":if(r.getDate()!==o.getDate())return!1;case"month":case"months":if(r.getMonth()!==o.getMonth())return!1;case"year":case"years":if(r.getFullYear()!==o.getFullYear())return!1;break;default:throw new Error(`date isSameDate unknown unit ${n}`)}return!0}function I(e){return new Date(e.getFullYear(),e.getMonth()+1,0).getDate()}function M(e){if(e>=11&&e<=13)return`${e}th`;switch(e%10){case 1:return`${e}st`;case 2:return`${e}nd`;case 3:return`${e}rd`}return`${e}th`}const T={YY(e,t,n){const r=this.YYYY(e,t,n)%100;return r>=0?f(r):"-"+f(Math.abs(r))},YYYY(e,t,n){return n!=null?n:e.getFullYear()},M(e){return e.getMonth()+1},Mo(e){return M(e.getMonth()+1)},MM(e){return f(e.getMonth()+1)},MMM(e,t){return t.monthsShort[e.getMonth()]},MMMM(e,t){return t.months[e.getMonth()]},Q(e){return Math.ceil((e.getMonth()+1)/3)},Qo(e){return M(this.Q(e))},D(e){return e.getDate()},Do(e){return M(e.getDate())},DD(e){return f(e.getDate())},DDD(e){return Y(e)},DDDo(e){return M(Y(e))},DDDD(e){return f(Y(e),3)},d(e){return e.getDay()},do(e){return M(e.getDay())},dd(e,t){return t.days[e.getDay()].slice(0,2)},ddd(e,t){return t.daysShort[e.getDay()]},dddd(e,t){return t.days[e.getDay()]},E(e){return e.getDay()||7},w(e){return S(e)},wo(e){return M(S(e))},ww(e){return f(S(e))},H(e){return e.getHours()},HH(e){return f(e.getHours())},h(e){const t=e.getHours();return t===0?12:t>12?t%12:t},hh(e){return f(this.h(e))},m(e){return e.getMinutes()},mm(e){return f(e.getMinutes())},s(e){return e.getSeconds()},ss(e){return f(e.getSeconds())},S(e){return Math.floor(e.getMilliseconds()/100)},SS(e){return f(Math.floor(e.getMilliseconds()/10))},SSS(e){return f(e.getMilliseconds(),3)},A(e){return e.getHours()<12?"AM":"PM"},a(e){return e.getHours()<12?"am":"pm"},aa(e){return e.getHours()<12?"a.m.":"p.m."},Z(e,t,n,r){const o=r==null?e.getTimezoneOffset():r;return F(o,":")},ZZ(e,t,n,r){const o=r==null?e.getTimezoneOffset():r;return F(o)},X(e){return Math.floor(e.getTime()/1e3)},x(e){return e.getTime()}};function fe(e,t,n,r,o){if(e!==0&&!e||e===1/0||e===-1/0)return;const a=new Date(e);if(isNaN(a))return;t===void 0&&(t=_);const c=H(n,P.props);return t.replace(W,(l,s)=>l in T?T[l](a,c,r,o):s===void 0?l:s.split("\\]").join("]"))}function he(e){return k(e)===!0?new Date(e.getTime()):e}const y={isValid:ee,extractDate:J,buildDate:te,getDayOfWeek:re,getWeekOfYear:S,isBetweenDates:oe,addToDate:ae,subtractFromDate:se,adjustDate:q,startOfDate:D,endOfDate:ie,getMaxDate:ce,getMinDate:le,getDateDiff:R,getDayOfYear:Y,inferDateFormat:ue,getDateBetween:de,isSameDate:me,daysInMonth:I,formatDate:fe,clone:he},De={cofirmarAccion(e,t){return new Promise(n=>{let r=document.activeElement;const o={true:{tipo:"positive",color:"green",icon:"check"},false:{tipo:"negative",color:"red",icon:"close"},null:{tipo:"warning",color:"orange",icon:"warning"}},{tipo:a,color:c,icon:l}=o[t]||{tipo:"info",color:"blue",icon:"info"},s=`dialog-${Date.now()}`,g=b.create({dark:!1,message:`
          <div id="${s}" class="items-center col row q-gutter-xs justify-center">
            <i style="color: ${c}" class="q-mr-md q-icon material-icons text-h1 notranslate">${l}</i>
            <p class="q-pa-xs justify-center text-subtitle1 text-center">${e}</p>
          </div>
          <hr style="width: 100%; margin: 0; border: 1px solid lightgray;" />
        `,ok:{label:"Sí",autofocus:!0,color:"green",textColor:"white"},html:!0,style:{borderTop:`5px solid ${c}`},cancel:{label:"No",color:"red-6",autofocus:!1,textColor:"white"},persistent:!0});let i=1;const u=m=>{const d=document.querySelector(`#${s}`);if(!d)return;const h=d.closest(".q-dialog").querySelectorAll(".q-btn");h.length&&(m.key==="ArrowRight"||m.key==="ArrowLeft"?(h[i].style.opacity="0.5",i=(i+1)%2,h[i].style.opacity="1",h[i].focus()):m.key==="Enter"&&h[i].click())},p=()=>{const m=document.querySelector(`#${s}`);if(!m)return;const d=m.closest(".q-dialog").querySelectorAll(".q-btn");d.length&&(d.forEach((h,z)=>{h.style.opacity=z===i?"1":"0.3"}),d[i].focus())};setTimeout(()=>p(),100),g.onOk(()=>{window.removeEventListener("keydown",u),setTimeout(()=>{const m=document.querySelector("button.q-btn:focus");m&&m.blur(),r&&r.blur&&r.blur();const d=document.querySelector(".q-loading__box");d&&(d.setAttribute("tabindex","-1"),d.focus())},100),n(!0)}),g.onCancel(()=>{window.removeEventListener("keydown",u),n(!1)}),window.addEventListener("keydown",u)})},obtenerRespuestaPrompt:async e=>new Promise(t=>{b.create({title:e,prompt:{model:"",type:"text",required:!0,okLabel:"Aceptar",cancelLabel:"Cancelar"}}).onOk(n=>(t(n),n)).onCancel(()=>(t(!0),null)).onDismiss(()=>(t(!0),null))}),regla:e=>(e&&(e=e.trim()),!e||e.length===0?"Este campo es obligatorio. *":!0),reglaFiles:e=>{if(!e||e.length===0)return"Debe seleccionar un archivo";for(let t=0;t<e.length;t++){const n=e[t];if(n.type!=="application/pdf")return"Solo se permiten archivos PDF";if(n.size>3*1024*1024)return"El archivo no puede superar los 3 MB"}return!0},reglaFilesNoObligatorio:e=>{if(!e||e.length===0)return!0;for(let t=0;t<e.length;t++){const n=e[t];if(n.type!=="application/pdf")return"Solo se permiten archivos PDF";if(n.size>3*1024*1024)return"El archivo no puede superar los 3 MB"}return!0},reglaNumero(e){return!e||e.length===0?"Este campo es obligatorio. *":isNaN(e)?"Debe ser un número válido.":!0},reglaTexto(e){return!e||e.length===0?"Este campo es obligatorio. *":/^[A-Za-z]+$/.test(e)?!0:"Solo se permiten letras."},reglaBloqueada:(e,t)=>!t&&(!e||e.length===0)?"Este campo es obligatorio.":!0,reglaSelect:e=>e==null||e===""?"Este campo es obligatorio *":!0,verOpcionesCamara:async()=>new Promise((e,t)=>{BottomSheet.create({message:"Opciones Camara",grid:!0,actions:[{label:"Galeria",icon:"photo_library",id:"galeria"},{label:"Camara",icon:"photo_camera",id:"camara"}]}).onOk(n=>{n.id==="camara"&&e(1),n.id==="galeria"&&e(2)}).onCancel(()=>{e(null)})}),tomarFoto:async e=>new Promise((t,n)=>{navigator.camera.getPicture(r=>{t(`data:image/jpeg;base64,${r}`)},r=>{n(r)},{quality:100,destinationType:0,targetWidth:1600,targetHeight:1200,sourceType:e,encodingType:0,saveToPhotoAlbum:!1,correctOrientation:!0})}),notificacion:async(e,t)=>{let n=await t?"check_circle":"warning",r=await t?"green":"red";t===null&&(n="task_alt",r="orange");const o=`
    <div style='height: 10px; width: 100%; background-color: ${r}; position: absolute; top: 0; left: 0'></div >
    <div class="column justify-center items-center">
    <i style="color: ${r}" class="q-mr-md q-mt-md q-icon material-icons text-h1 on-left notranslate " aria-hidden="true" role="img">${n}</i>
    <p class="text-center text-grey-9">${e}</p>
    </div>
    `;b.create({message:o,icon:null,html:!0,ok:!0})},darFormatofecha:e=>y.formatDate(e,"DD/MM/YYYY"),darFormatoDate:e=>y.formatDate(e,"YYYY-MM-DD"),darFormatoHoras:e=>y.formatDate(e,"hh:mm:ss A"),darFormatoHorasCompleta:e=>{if(!e)return"";const[t,n]=e.split(":"),r=new Date;return r.setHours(Number(t),Number(n),0),y.formatDate(r,"hh:mm A")},darFormatofechaConHoras:e=>y.formatDate(e,"DD/MM/YYYY hh:mm:ss A"),datoUsuario:async()=>{try{const e=localStorage.getItem("usuarioLigthing"),t=e.startsWith("__q_objt|")?e.slice(9):e;return JSON.parse(t)}catch(e){return console.error("Error al recuperar el usuario:",e),null}},datoEmpresa:async()=>{try{const e=localStorage.getItem("EmpresaSeleccionadaOneZip");if(!e)return null;const t=e.startsWith("__q_objt|")?e.slice(9):e;return JSON.parse(t)}catch(e){return console.error("Error al recuperar la empresa",e),null}},existePermiso:(e,t)=>!!e.find(r=>r.Codigo==t),datoPermiso:async e=>{try{const t=localStorage.getItem("MenuOnezip");if(t){const n=t.replace(/^__q_objt\|/,"");let r=JSON.parse(n);for(const o of r){const a=o.Vistas.find(c=>c.Nombre===e);if(a)return a.Permisos}}return null}catch(t){return console.error("Error al recuperar la empresa",t),null}},retornarMeses(){return[{label:"Enero",value:1},{label:"Febrero",value:2},{label:"Marzo",value:3},{label:"Abril",value:4},{label:"Mayo",value:5},{label:"Junio",value:6},{label:"Julio",value:7},{label:"Agosto",value:8},{label:"Septiembre",value:9},{label:"Octubre",value:10},{label:"Noviembre",value:11},{label:"Diciembre",value:12}]},formatoMoneda(e,t){if(!e)return 0;let n=parseFloat(e);return n==0||n==null?0:(t||(t=0),n=this.formatoMonedaNumero(e,t),n=n.toLocaleString("es-CO",{currency:"COP",minimumFractionDigits:t}),n)},formatoMonedaNumero(e,t){try{return e=parseFloat(e),e===0?0:Number(e.toFixed(t))}catch(n){console.error(`Ocurrio un error ${n.message},  valor => ${e}`)}},aplicarFormula(e,t){const n=e.Cantidad;e.Total=this.formatoMonedaNumero(n*e.Precio,t.NumeroDecimales);let r=e.Total,o=0;r=this.formatoMonedaNumero(r,t.NumeroDecimales),e.Impuestos.map(a=>{let c=this.aplicarTasa(r,a.Tasa,"I",t.IsRedondear).Impuesto;o+=c}),o=this.formatoMonedaNumero(o,t.NumeroDecimales),e.ValorImpuesto=o,e.ValorBase=r-o,e.ValorTotal=e.ValorBase},aplicarTasa(e,t,n,r){e=parseFloat(e),t=parseFloat(t);let o=0,a=0;if(n==="D")return o=e*t/100,o=o*100/100,this.formatoMonedaNumero(o,r),o;if(n==="I")return o=e/(1+t/100)*100/100,this.formatoMonedaNumero(o,r),a=(e-o)*100/100,this.formatoMonedaNumero(a,r),{Total:o,Impuesto:a};throw new Error("Tipo no válido. Usa 'D' para descuento o 'I' para impuesto.")},aplicarTasaImpuestos(e,t,n){let r=e*t/100;return r=this.formatoMonedaNumero(r,n),r},loadingNotify:async(e,t)=>{e?(O.show({backgroundColor:"rgba(0, 0, 0, 0.8)",spinnerSize:0,boxClass:"bg-white text-grey-9 no-outline q-pa-md q-rounded-borders",message:`
      <div style="display: flex; flex-direction: column; align-items: center;">
        <svg width="160" height="160" viewBox="0 0 200 200" xmlns="http://www.w3.org/2000/svg">
          <!-- Fondo circular -->
          <circle cx="100" cy="100" r="80" fill="none" stroke="#007BFF" stroke-width="10" stroke-opacity="0.2" />
          
          <!-- Círculo animado -->
          <circle cx="100" cy="100" r="80" fill="none" stroke="#007BFF" stroke-width="10" stroke-dasharray="502" stroke-dashoffset="502">
            <animate attributeName="stroke-dashoffset" values="502;0" dur="1.2s" repeatCount="indefinite" />
          </circle>
          
          <!-- Inicial estilizada -->
          <text x="50%" y="120" font-family="Arial, sans-serif" font-size="60" fill="#007BFF" font-weight="bold" text-anchor="middle">
            LS
          </text>
        </svg>

        <p style="margin-top: 8px; font-size: 20px; color: #007BFF; font-weight: bold; letter-spacing: 1px;">
          Ligthing Services
        </p>

        <p class="q-mt-sm text-grey-8 text-body1 text-center" style="max-width: 200px;">
          ${t}
        </p>
      </div>
      `,html:!0}),setTimeout(()=>{const n=document.querySelector(".q-loading__box");n&&(n.setAttribute("tabindex","-1"),n.addEventListener("keydown",r=>{r.key==="Tab"&&r.preventDefault()}))},100)):O.hide()},async cifrarTexto(e,t){const n=crypto.getRandomValues(new Uint8Array(12)),r=await crypto.subtle.encrypt({name:"AES-GCM",iv:n},t,new TextEncoder().encode(e)),o=new Uint8Array(r),a=new Uint8Array(n.length+o.length);a.set(n),a.set(o,n.length);let c="";return a.forEach(l=>{c+=String.fromCharCode(l)}),btoa(c)},async IncriptarClave(e){const t=await this.crearDecifrarClaveSecreta(!0);return await this.cifrarTexto(e.toString(),t)},async DesIncriptarClave(e,t){try{if(!/^[A-Za-z0-9+/=]+$/.test(e))throw new Error("Texto cifrado no está en formato Base64 válido");const n=new Uint8Array(atob(e).split("").map(c=>c.charCodeAt(0))),r=n.slice(0,12),o=n.slice(12),a=await crypto.subtle.decrypt({name:"AES-GCM",iv:r},t,o);return new TextDecoder().decode(a)}catch(n){throw console.error("Error al descifrar la clave:",n),n}},async crearDecifrarClaveSecreta(e){const t="cpx{^;7ss#:4(4YC",n=e?"encrypt":"decrypt";return await crypto.subtle.importKey("raw",new TextEncoder().encode(t),{name:"AES-GCM"},!1,[n])},formatearFecha(e){const t=new Date(e),n=String(t.getDate()).padStart(2,"0"),r=String(t.getMonth()+1).padStart(2,"0"),o=t.getFullYear();return`${n}/${r}/${o}`},crearExcel(e,t){const n=new Blob([e.data],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"}),r=URL.createObjectURL(n),o=document.createElement("a");o.href=r,o.download=`Reporte ${t} ${y.formatDate(Date.now(),"DD-MM-YYYY HH:mm:ss")}.xlsx`,o.click(),URL.revokeObjectURL(r)},creaPDF(e,t){const n=new Blob([e.data],{type:"application/pdf"}),r=URL.createObjectURL(n);if(navigator.userAgent.match(/Android/i)||navigator.userAgent.match(/webOS/i)||navigator.userAgent.match(/iPhone/i)||navigator.userAgent.match(/iPad/i)||navigator.userAgent.match(/iPod/i)||navigator.userAgent.match(/BlackBerry/i)||navigator.userAgent.match(/Windows Phone/i)){const o=document.createElement("a");o.href=r,o.download=`documento-${t}.pdf`,document.body.appendChild(o),o.click(),document.body.removeChild(o)}else{const o=document.createElement("iframe");o.style.display="none",o.src=r,document.body.appendChild(o),o.onload=()=>{o.contentWindow.print()}}},formatearFechaLarga(e){const t=new Date(e),n=t.getDate(),r={month:"long"},o=new Intl.DateTimeFormat("es-ES",r).format(t),a=t.getFullYear();return`${n} de ${o} de ${a}`},TarifaPorGradoDian(){return{tarifa:254,PresentacionEstandar:750}},mensaje(e){this.notificacion(e,null)},regla(e){return e!==void 0&&e!==""&&e!==null?!0:"Falta completar campo"},mensajeError(e,t){this.$q.notify({color:"negative",position:t===void 0?"top":t,message:e,icon:"report_problem"})},mensajeConfirmacion(e,t){return new Promise(n=>b.create({title:"Neosage",dark:!0,html:t,message:e,cancel:!0,persistent:!0}).onOk(()=>n(!0)).onCancel(()=>n(!1)))},validarFormulario(e){return new Promise(t=>e.validate().then(n=>{t(!!n)}))},validarPeriodo(e,t){var a;let n=(a=$.getItem(`ConfiguracionPresupuesto${t}`))==null?void 0:a.replace("__q_strn|",""),r=new Date(n+"T00:00:00").getFullYear(),o=new Date(e+"T00:00:00").getFullYear();return r!==o?(this.notificacion("Fecha diferente al periodo",!1),!1):!0},traerVigencia(e){let n=$.getItem(`ConfiguracionPresupuesto${e}`).replace("__q_strn|","");return parseInt(n)},traerEntidad(e){let n=$.getItem(`ConfiguracionPresupuesto${e}-entidad`).replace("__q_strn|","");return parseInt(n)},fechaHoy(){return y.formatDate(new Date,"YYYY-MM-DD")},fechaSistema(){return y.formatDate(new Date,"YYYY-MM-DD")},formatoFecha(e,t){return t?y.formatDate(e,t):y.formatDate(e,"DD/MM/YYYY")},construirDatoImpresoraPos:async(e,t)=>{const n=parseInt(t.Ancho),r=7,o=n-r;let a="";for(let s=2;s<n;s++)a+="-";let c=`[L]<font size='wide'>MODULO: ${e.Modulo}</font>[C][R]
  [L]<font size='small'>${e.Numero}</font>[C][R]
  [L]<font size='small'>Fecha: ${e.FechaCreacion}</font>[C][R]
  [L]<font size='small'>Zona: ${e.Zona}</font>[C][R]
  [L]<font size='small'>Atendido por: ${e.Empleado}</font>[C][R]
  [L]<font size='small'>Observacion: ${e.Observacion}</font> [C][R]`;c+=`
`+a+`
`,c+="CTN      DESCRIPCION",c+=`
`+a+`
`;function l(s,g){let i=[];for(;s.length>g;)i.push(s.substring(0,g)),s=s.substring(g);return i.push(s),i}return e.Productos.forEach(s=>{let g="",i="";s.Observaciones.length>0&&s.Observaciones.forEach(h=>{g+=`-${h.Nombre}`}),s.IsInventarioEspecial&&s.ListaInventarioEspecial.forEach(h=>{i+=`${h.Cantidad} => ${h.Nombre}, `});let u=`${s.Nombre}`,p=[];g.length>0&&p.push(g),s.Observacion&&s.Observacion.length>0&&p.push(s.Observacion),i.length>0&&p.push(i),p.length>0&&(u+=` (${p.join(" - ")})`);let m=s.Cantidad.toString().padEnd(r," "),d=l(u,o);c+=`${m}${d[0]}
`;for(let h=1;h<d.length;h++)c+=`       ${d[h]}
`;c+=a+`
`}),c+=`
 
 
 
 
 
`,c},imprimir(e,t){const n={type:"tcp",address:e.Ip,port:e.Puerto,id:`tcp-printer-${e.Codigo}`,text:t,autoCut:!0},r={type:"tcp",address:e.Ip,port:e.Puerto,id:`tcp-printer-${e.Codigo}`};return new Promise((o,a)=>{ThermalPrinter.printFormattedTextAndCut(n,()=>{console.log("¡Impresión exitosa!"),ThermalPrinter.disconnectPrinter(r,()=>{console.log("Conexión con impresora cerrada (buffer limpio)"),o(!0)},c=>{console.warn("Falló al desconectar impresora:",c),o(!0)})},c=>{console.error("Ocurrió un error al imprimir:",c),a(c)})})},desconectarImpresora(){return new Promise((e,t)=>{ThermalPrinter.disconnectPrinter({type:"tcp",address:impresora.Ip,port:impresora.Puerto,id:`tcp-printer-${impresora.Codigo}`,text:contenido,autoCut:!0},()=>{console.log("¡Desconexión exitosa!"),e(!0)},n=>{console.error(`Ocurrió un error al desconectar la impresora: ${n}`),alert(`Ocurrió un error al desconectar: ${n.message||n}`),t(!1)})})},obtenerAnosAnteriores:e=>{let t=new Date().getFullYear();return Array.from({length:e},(n,r)=>t-r)},generarPdf:async(e,t)=>{const n=new Blob([e.data],{type:"application/pdf"}),r=URL.createObjectURL(n);if(navigator.userAgent.match(/Android/i)||navigator.userAgent.match(/webOS/i)||navigator.userAgent.match(/iPhone/i)||navigator.userAgent.match(/iPad/i)||navigator.userAgent.match(/iPod/i)||navigator.userAgent.match(/BlackBerry/i)||navigator.userAgent.match(/Windows Phone/i)){const o=document.createElement("a");o.href=r,o.download=`documento-${t}.pdf`,document.body.appendChild(o),o.click(),document.body.removeChild(o)}else{const o=document.createElement("iframe");o.style.display="none",o.src=r,document.body.appendChild(o),o.onload=()=>{o.contentWindow.print()}}},generarPdfDocumentosRenta:async e=>{const t=new Blob([e.data],{type:"application/pdf"}),n=URL.createObjectURL(t);if(navigator.userAgent.match(/Android/i)||navigator.userAgent.match(/webOS/i)||navigator.userAgent.match(/iPhone/i)||navigator.userAgent.match(/iPad/i)||navigator.userAgent.match(/iPod/i)||navigator.userAgent.match(/BlackBerry/i)||navigator.userAgent.match(/Windows Phone/i)){const r=document.createElement("a");r.href=n,r.download="documento-nombreArchivo.pdf",document.body.appendChild(r),r.click(),document.body.removeChild(r)}else{const r=document.createElement("iframe");r.style.display="none",r.src=n,document.body.appendChild(r),r.onload=()=>{r.contentWindow.print()}}},peticion:async(e,t,n={})=>{try{return await(()=>{switch(e.toUpperCase()){case"GET":return w.get(t);case"POST":return w.post(t,{...n});case"PUT":return w.put(t,{...n});case"DELETE":return w.delete(t,{data:{...n}});default:throw new Error("Método no soportado")}})()}catch(r){return console.error("Ocurrio un error inesperado"+r),null}},peticionMasiva:async e=>{try{return(await Promise.all(e.map(n=>w.get(n)))).map(n=>n)}catch(t){return console.error(`Ocurrió un error inesperado: ${t}`),null}},paginarTabla:(e,t)=>{console.log(e,t);const n=e,r=[];for(let o=t;o<=n;o+=t)r.push(o);return n%t!==0&&r[r.length-1]!==n&&r.push(n),r},pagination:(e=20)=>({page:1,rowsPerPage:e}),totalesTabla:(e,t,n)=>Z(()=>{let r=t.reduce((o,a)=>{let c=parseFloat(a[n])||0;return o+c},0);return r=e.formatoMoneda(r,2),r})};export{De as U};
