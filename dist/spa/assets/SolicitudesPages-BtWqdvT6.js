import{r,k as x,l as D,m as o,f as l,Q as s,p as t,a6 as n,n as m,t as u,x as g,y as S}from"./index-CPZClO88.js";import{Q as I,a as V,b as P,c as M}from"./QTabPanels-BTt8AxPi.js";import{Q as C,h as T}from"./QMarkupTable-CDTfQPvq.js";import{Q as w}from"./QTable-Bw_aTjQQ.js";import{Q as E}from"./QPage-B5_if6o9.js";import"./QResizeObserver-CTj2SYEs.js";import"./touch-BjYP5sR0.js";import"./selection-BEwD1R3a.js";import"./format-DyQxkAtJ.js";const U={class:"row q-col-gutter-md"},_={class:"q-mt-md"},q={class:"row q-col-gutter-md"},k={class:"q-mt-md"},J={__name:"SolicitudesPages",setup(L){const c=r("solicitudes"),f=r([{Id:1,Nombre:"Luminaria Assic – Nautilus"},{Id:2,Nombre:"Luminaria Sylvania"},{Id:3,Nombre:"Collarín Alutrafic"},{Id:4,Nombre:"Luminaria Mercury"},{Id:5,Nombre:"Poste Imporled"},{Id:6,Nombre:"Luminaria Celsa"},{Id:7,Nombre:"Luminaria RoyAlpha"}]),i=r({Tecnico:"",OrdenServicio:"",Material:null,Cantidad:0}),v=r([]),O=[{name:"fecha",label:"Fecha",field:"Fecha",align:"left"},{name:"tecnico",label:"Técnico",field:"Tecnico",align:"left"},{name:"orden",label:"Orden",field:"OrdenServicio",align:"center"},{name:"material",label:"Material",field:"MaterialNombre",align:"left"},{name:"cantidad",label:"Cantidad",field:"Cantidad",align:"center"},{name:"estado",label:"Estado",field:"Estado",align:"center"}],d=r({Tecnico:"",OrdenServicio:"",Material:null,Cantidad:0}),b=r([]),y=[{name:"fecha",label:"Fecha",field:"Fecha",align:"left"},{name:"tecnico",label:"Técnico",field:"Tecnico",align:"left"},{name:"orden",label:"Orden",field:"OrdenServicio",align:"center"},{name:"material",label:"Material",field:"Material",align:"left"},{name:"cantidad",label:"Cantidad",field:"Cantidad",align:"center"},{name:"estado",label:"Estado",field:"Estado",align:"center"}];function N(){if(!i.value.Tecnico||!i.value.OrdenServicio||!i.value.Material||i.value.Cantidad<=0){alert("Por favor completa todos los campos antes de registrar la solicitud.");return}const p=f.value.find(e=>e.Id===i.value.Material);v.value.push({id:Date.now(),Fecha:new Date().toLocaleString(),Tecnico:i.value.Tecnico,OrdenServicio:i.value.OrdenServicio,MaterialNombre:p.Nombre,Cantidad:i.value.Cantidad,Estado:"Pendiente"}),i.value={Tecnico:"",OrdenServicio:"",Material:null,Cantidad:0}}function Q(){if(!d.value.Tecnico||!d.value.OrdenServicio||!d.value.Material||d.value.Cantidad<=0){alert("Por favor completa todos los campos antes de registrar la devolución.");return}b.value.push({id:Date.now(),Fecha:new Date().toLocaleString(),Tecnico:d.value.Tecnico,OrdenServicio:d.value.OrdenServicio,Material:d.value.Material,Cantidad:d.value.Cantidad,Estado:"Pendiente"}),d.value={Tecnico:"",OrdenServicio:"",Material:null,Cantidad:0}}return(p,e)=>(D(),x(E,{padding:""},{default:o(()=>[l(s,{class:"q-pa-md shadow-3"},{default:o(()=>[l(t,{class:"bg-blue-10 text-white text-h6"},{default:o(()=>[...e[10]||(e[10]=[n(" Gestión de Solicitudes de Materiales y Devoluciones ",-1)])]),_:1}),l(I,{modelValue:c.value,"onUpdate:modelValue":e[0]||(e[0]=a=>c.value=a),dense:"",class:"text-grey-8","active-color":"primary","indicator-color":"primary"},{default:o(()=>[l(V,{name:"solicitudes",label:"Solicitud de Material",icon:"add_circle_outline"}),l(V,{name:"devoluciones",label:"Solicitud de Devolución",icon:"undo"})]),_:1},8,["modelValue"])]),_:1}),l(P,{modelValue:c.value,"onUpdate:modelValue":e[9]||(e[9]=a=>c.value=a),animated:""},{default:o(()=>[l(M,{name:"solicitudes"},{default:o(()=>[l(s,{class:"q-mt-md shadow-2"},{default:o(()=>[l(t,{class:"bg-blue-2 text-h6"},{default:o(()=>[...e[11]||(e[11]=[n(" Solicitud de Material por Técnico ",-1)])]),_:1}),l(t,null,{default:o(()=>[m("div",U,[l(u,{filled:"",class:"col-12 col-md-4",label:"Técnico",modelValue:i.value.Tecnico,"onUpdate:modelValue":e[1]||(e[1]=a=>i.value.Tecnico=a)},null,8,["modelValue"]),l(u,{filled:"",class:"col-12 col-md-4",label:"Orden de Servicio",modelValue:i.value.OrdenServicio,"onUpdate:modelValue":e[2]||(e[2]=a=>i.value.OrdenServicio=a)},null,8,["modelValue"]),l(C,{filled:"",class:"col-12 col-md-4",label:"Material",modelValue:i.value.Material,"onUpdate:modelValue":e[3]||(e[3]=a=>i.value.Material=a),options:f.value,"option-label":"Nombre","option-value":"Id","emit-value":"","map-options":""},null,8,["modelValue","options"]),l(u,{filled:"",class:"col-12 col-md-2",label:"Cantidad Solicitada",type:"number",modelValue:i.value.Cantidad,"onUpdate:modelValue":e[4]||(e[4]=a=>i.value.Cantidad=a),modelModifiers:{number:!0},min:"1"},null,8,["modelValue"])]),m("div",_,[l(g,{color:"primary",label:"Registrar Solicitud",icon:"add_circle",onClick:N})])]),_:1})]),_:1}),l(s,{class:"q-mt-lg shadow-2"},{default:o(()=>[l(t,{class:"bg-grey-3 text-h6"},{default:o(()=>[...e[12]||(e[12]=[n("Solicitudes Realizadas",-1)])]),_:1}),l(w,{rows:v.value,columns:O,"row-key":"id",dense:"",flat:""},{"body-cell-estado":o(a=>[l(T,{color:a.row.Estado==="Pendiente"?"orange":"green","text-color":"white"},{default:o(()=>[n(S(a.row.Estado),1)]),_:2},1032,["color"])]),_:1},8,["rows"])]),_:1})]),_:1}),l(M,{name:"devoluciones"},{default:o(()=>[l(s,{class:"q-mt-md shadow-2"},{default:o(()=>[l(t,{class:"bg-green-2 text-h6"},{default:o(()=>[...e[13]||(e[13]=[n(" Solicitud de Devolución de Material ",-1)])]),_:1}),l(t,null,{default:o(()=>[m("div",q,[l(u,{filled:"",class:"col-12 col-md-4",label:"Técnico",modelValue:d.value.Tecnico,"onUpdate:modelValue":e[5]||(e[5]=a=>d.value.Tecnico=a)},null,8,["modelValue"]),l(u,{filled:"",class:"col-12 col-md-4",label:"Orden de Servicio",modelValue:d.value.OrdenServicio,"onUpdate:modelValue":e[6]||(e[6]=a=>d.value.OrdenServicio=a)},null,8,["modelValue"]),l(C,{filled:"",class:"col-12 col-md-4",label:"Material a Devolver",modelValue:d.value.Material,"onUpdate:modelValue":e[7]||(e[7]=a=>d.value.Material=a),options:v.value.map(a=>({label:a.MaterialNombre,value:a.MaterialNombre})),"emit-value":"","map-options":""},null,8,["modelValue","options"]),l(u,{filled:"",class:"col-12 col-md-2",label:"Cantidad a Devolver",type:"number",modelValue:d.value.Cantidad,"onUpdate:modelValue":e[8]||(e[8]=a=>d.value.Cantidad=a),modelModifiers:{number:!0},min:"1"},null,8,["modelValue"])]),m("div",k,[l(g,{color:"green",label:"Registrar Devolución",icon:"undo",onClick:Q})])]),_:1})]),_:1}),l(s,{class:"q-mt-lg shadow-2"},{default:o(()=>[l(t,{class:"bg-grey-3 text-h6"},{default:o(()=>[...e[14]||(e[14]=[n("Devoluciones Registradas",-1)])]),_:1}),l(w,{rows:b.value,columns:y,"row-key":"id",dense:"",flat:""},{"body-cell-estado":o(a=>[l(T,{color:a.row.Estado==="Pendiente"?"orange":"blue","text-color":"white"},{default:o(()=>[n(S(a.row.Estado),1)]),_:2},1032,["color"])]),_:1},8,["rows"])]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1}))}};export{J as default};
