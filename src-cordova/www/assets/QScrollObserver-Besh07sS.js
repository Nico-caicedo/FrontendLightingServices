import{b0 as v,A as h,b1 as S,w as b,b2 as x,g as T,o as P,D as C,aO as O,b3 as w,b4 as E}from"./index-DD84rciS.js";const{passive:p}=v,M=["both","horizontal","vertical"],A=h({name:"QScrollObserver",props:{axis:{type:String,validator:e=>M.includes(e),default:"vertical"},debounce:[String,Number],scrollTarget:S},emits:["scroll"],setup(e,{emit:m}){const t={position:{top:0,left:0},direction:"down",directionChanged:!1,delta:{top:0,left:0},inflectionPoint:{top:0,left:0}};let o=null,i,u;b(()=>e.scrollTarget,()=>{f(),d()});function l(){o==null||o();const a=Math.max(0,w(i)),s=E(i),n={top:a-t.position.top,left:s-t.position.left};if(e.axis==="vertical"&&n.top===0||e.axis==="horizontal"&&n.left===0)return;const g=Math.abs(n.top)>=Math.abs(n.left)?n.top<0?"up":"down":n.left<0?"left":"right";t.position={top:a,left:s},t.directionChanged=t.direction!==g,t.delta=n,t.directionChanged===!0&&(t.direction=g,t.inflectionPoint=t.position),m("scroll",{...t})}function d(){i=x(u,e.scrollTarget),i.addEventListener("scroll",r,p),r(!0)}function f(){i!==void 0&&(i.removeEventListener("scroll",r,p),i=void 0)}function r(a){if(a===!0||e.debounce===0||e.debounce==="0")l();else if(o===null){const[s,n]=e.debounce?[setTimeout(l,e.debounce),clearTimeout]:[requestAnimationFrame(l),cancelAnimationFrame];o=()=>{n(s),o=null}}}const{proxy:c}=T();return b(()=>c.$q.lang.rtl,l),P(()=>{u=c.$el.parentNode,d()}),C(()=>{o==null||o(),f()}),Object.assign(c,{trigger:r,getPosition:()=>t}),O}});export{A as Q};
