import{u as v,r as c,o as y,k as b,l as x,m as a,f as o,n as i,Q as w,p as _,q as U,t as p,v as d,x as L,y as Q,z as I,P as m}from"./index-DD84rciS.js";import{Q as q}from"./QForm-DwmnhYBt.js";import{Q as V,a as P}from"./QLayout-jH8LQd6W.js";import{_ as E}from"./LogoCorporativo-BVw7ahIP.js";import{u as C}from"./use-quasar-CoRWwBkt.js";import{api as N}from"./axios-DO-4OFiN.js";import{U as r}from"./Utils-DJ7xQ2GR.js";import{_ as h}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./QScrollObserver-Besh07sS.js";import"./QResizeObserver-u-GIezmO.js";import"./format-DyQxkAtJ.js";const k={class:"col-12 col-md-6 q-pa-lg"},B={class:"login-footer col-12 text-center text-grey-7"},z={__name:"LoginLayout",setup(D){C();const u=v(),f=new Date().getFullYear(),l=c(!0),t=c({});y(async()=>{if(await r.datoUsuario()===null){u.push("/login");return}else u.push("/principal")});const g=async()=>{var n;try{r.loadingNotify(!0,"Procesando...");const e=await N.post(`/usuario/${t.value.LoginUsuario}/${t.value.PasswordUsuario}/autentica-usuario`);r.notificacion(e.data.Mensaje,e.data.IsExito),console.log(e.data.Dato),e.data.IsExito&&(m.set("usuarioLigthing",e.data.Dato),m.getItem("usuarioLigthing")&&u.push("/principal"))}catch(e){console.error("Error al autenticar usuario:",e),e.response?r.notificacion(`Error: ${((n=e.response.data)==null?void 0:n.Mensaje)||"Error en el servidor."}`,!1):e.request?r.notificacion("No se pudo conectar con el servidor. Verifica tu conexión.",!1):r.notificacion("Ocurrió un error inesperado.",!1)}finally{r.loadingNotify(!1,"")}};return(n,e)=>(x(),b(P,{view:"lHh Lpr lFf",class:"bg-blue-grey-1"},{default:a(()=>[o(V,{class:"login-container row items-center justify-center col-12 q-px-md"},{default:a(()=>[o(w,{class:"login-card q-mx-md shadow-3 rounded-borders bg-white"},{default:a(()=>[o(_,{class:"row items-stretch"},{default:a(()=>[e[5]||(e[5]=i("div",{class:"col-12 col-md-6 flex flex-center q-pa-lg bg-blue-grey-1"},[i("img",{class:"logo-side",src:E,alt:"Logo"})],-1)),i("div",k,[e[3]||(e[3]=i("div",{class:"title text-h6 text-primary"},"Bienvenido",-1)),e[4]||(e[4]=i("div",{class:"subtitle text-subtitle2 text-blue-grey-7 q-mb-md"},"Inicia sesión para continuar",-1)),o(q,{onSubmit:U(g,["prevent"]),class:"q-gutter-md"},{default:a(()=>[o(p,{modelValue:t.value.LoginUsuario,"onUpdate:modelValue":e[0]||(e[0]=s=>t.value.LoginUsuario=s),label:"Usuario",outlined:"","lazy-rules":"",rules:[s=>!!s||"Ingrese su usuario"]},{prepend:a(()=>[o(d,{name:"person"})]),_:1},8,["modelValue","rules"]),o(p,{modelValue:t.value.PasswordUsuario,"onUpdate:modelValue":e[2]||(e[2]=s=>t.value.PasswordUsuario=s),label:"Contraseña",outlined:"",type:l.value?"password":"text","lazy-rules":"",rules:[s=>!!s||"Ingrese su contraseña"]},{prepend:a(()=>[o(d,{name:"lock"})]),append:a(()=>[o(d,{name:l.value?"visibility_off":"visibility",class:"cursor-pointer",onClick:e[1]||(e[1]=s=>l.value=!l.value)},null,8,["name"])]),_:1},8,["modelValue","type","rules"]),o(L,{type:"submit",label:"Ingresar",color:"primary",icon:"login",unelevated:"",size:"lg",class:"full-width q-mt-sm"})]),_:1})])]),_:1})]),_:1}),i("div",B," © NEOSAGE "+Q(I(f)),1)]),_:1})]),_:1}))}},J=h(z,[["__scopeId","data-v-3bbd4c1b"]]);export{J as default};
