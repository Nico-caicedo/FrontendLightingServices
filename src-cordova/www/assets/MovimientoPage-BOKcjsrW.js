import{r as n,k as S,l as g,m as t,f as l,Q as m,p as d,a6 as c,n as v,t as r,x as M}from"./index-D5vjZng5.js";import{Q as p}from"./QMarkupTable-D_s8XBCj.js";import{Q as C}from"./QTable-BEUxk8-q.js";import{Q as V}from"./QPage-BJi1r_Vy.js";import"./selection-DN5zOXK0.js";import"./format-DyQxkAtJ.js";const N={class:"row q-col-gutter-md"},k={class:"q-mt-md"},_={__name:"MovimientoPage",setup(Q){const f=[{label:"Entrada",value:"entrada"},{label:"Salida",value:"salida"}],u=n([{Id:1,Nombre:"Luminaria Assic – Nautilus",Stock:10},{Id:2,Nombre:"Luminaria Sylvania",Stock:15},{Id:3,Nombre:"Collarín Alutrafic",Stock:30},{Id:4,Nombre:"Luminaria Mercury",Stock:25},{Id:5,Nombre:"Poste Imporled",Stock:5}]),e=n({Tipo:null,Material:null,Cantidad:0,OrdenServicio:"",Tecnico:""}),s=n([]),b=[{name:"fecha",label:"Fecha",field:"Fecha",align:"left"},{name:"tipo",label:"Tipo",field:"Tipo",align:"left"},{name:"material",label:"Material",field:"MaterialNombre",align:"left"},{name:"cantidad",label:"Cantidad",field:"Cantidad",align:"center"},{name:"orden",label:"Orden",field:"OrdenServicio",align:"center"},{name:"tecnico",label:"Técnico",field:"Tecnico",align:"center"}];function T(){if(!e.value.Tipo||!e.value.Material||e.value.Cantidad<=0){alert("Por favor, completa los campos obligatorios.");return}const i=u.value.find(a=>a.Id===e.value.Material);if(i){if(e.value.Tipo==="salida"){if(i.Stock<e.value.Cantidad){alert(`No hay suficiente stock de ${i.Nombre}`);return}i.Stock-=e.value.Cantidad}else e.value.Tipo==="entrada"&&(i.Stock+=e.value.Cantidad);s.value.push({id:Date.now(),Fecha:new Date().toLocaleString(),Tipo:e.value.Tipo,MaterialNombre:i.Nombre,Cantidad:e.value.Cantidad,OrdenServicio:e.value.OrdenServicio,Tecnico:e.value.Tecnico}),e.value={Tipo:null,Material:null,Cantidad:0,OrdenServicio:"",Tecnico:""}}}return(i,a)=>(g(),S(V,{padding:""},{default:t(()=>[l(m,{class:"q-pa-md shadow-2"},{default:t(()=>[l(d,{class:"bg-blue-10 text-white text-h6"},{default:t(()=>[...a[5]||(a[5]=[c(" Registro de Movimientos de Inventario ",-1)])]),_:1}),l(d,null,{default:t(()=>[v("div",N,[l(p,{filled:"",class:"col-12 col-md-4",label:"Tipo de Movimiento",modelValue:e.value.Tipo,"onUpdate:modelValue":a[0]||(a[0]=o=>e.value.Tipo=o),options:f,"emit-value":"","map-options":""},null,8,["modelValue"]),l(p,{filled:"",class:"col-12 col-md-4",label:"Material",modelValue:e.value.Material,"onUpdate:modelValue":a[1]||(a[1]=o=>e.value.Material=o),options:u.value,"option-label":"Nombre","option-value":"Id","emit-value":"","map-options":""},null,8,["modelValue","options"]),l(r,{filled:"",class:"col-12 col-md-2",label:"Cantidad",type:"number",modelValue:e.value.Cantidad,"onUpdate:modelValue":a[2]||(a[2]=o=>e.value.Cantidad=o),modelModifiers:{number:!0},min:"1"},null,8,["modelValue"]),l(r,{filled:"",class:"col-12 col-md-4",label:"Orden de Servicio",modelValue:e.value.OrdenServicio,"onUpdate:modelValue":a[3]||(a[3]=o=>e.value.OrdenServicio=o)},null,8,["modelValue"]),l(r,{filled:"",class:"col-12 col-md-4",label:"Técnico Responsable",modelValue:e.value.Tecnico,"onUpdate:modelValue":a[4]||(a[4]=o=>e.value.Tecnico=o)},null,8,["modelValue"])]),v("div",k,[l(M,{color:"primary",label:"Registrar Movimiento",icon:"add_circle",onClick:T})])]),_:1})]),_:1}),l(m,{class:"q-mt-lg shadow-2"},{default:t(()=>[l(d,{class:"bg-grey-3 text-h6"},{default:t(()=>[...a[6]||(a[6]=[c(" Historial de Movimientos ",-1)])]),_:1}),l(C,{rows:s.value,columns:b,"row-key":"id",dense:"",flat:""},null,8,["rows"])]),_:1})]),_:1}))}};export{_ as default};
