import{A as we,G as Ve,g as ze,H as Qe,r as w,aU as Ae,c as N,w as ke,h,R as Me,aH as Re,aD as $e,v as Q,aV as Be,ak as _e,S as Fe,aB as Pe,at as qe,aW as Ue,aX as Le,u as je,o as De,k as ce,l as R,m as d,f as o,n as s,Q as de,p as U,aY as ue,a2 as fe,q as Ge,V as ee,X as ve,a0 as Ce,Z as me,af as He,ag as Oe,_ as L,y as A,x as te,$ as We,ab as Xe}from"./index-DD84rciS.js";import{a as ye}from"./QItemLabel-Y1e7J-9n.js";import{Q as ge,b as Ye}from"./QSelect-D9KbhcM8.js";import{Q as Se}from"./QBadge-DaOazUrh.js";import{Q as Ze}from"./QForm-DwmnhYBt.js";import{Q as Je}from"./QSlideTransition-WkxNlc5h.js";import{Q as et}from"./QScrollArea-C8iYDKG3.js";import{Q as tt}from"./QPage-BB2Um8dJ.js";import{U as k}from"./Utils-DJ7xQ2GR.js";import{u as at}from"./use-quasar-CoRWwBkt.js";import{api as j}from"./axios-DO-4OFiN.js";import{_ as lt}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./format-DyQxkAtJ.js";import"./QResizeObserver-u-GIezmO.js";import"./QScrollObserver-Besh07sS.js";import"./touch-BjYP5sR0.js";const rt=["none","strict","leaf","leaf-filtered"],it=we({name:"QTree",props:{...Ve,nodes:{type:Array,required:!0},nodeKey:{type:String,required:!0},labelKey:{type:String,default:"label"},childrenKey:{type:String,default:"children"},dense:Boolean,color:String,controlColor:String,textColor:String,selectedColor:String,icon:String,tickStrategy:{type:String,default:"none",validator:a=>rt.includes(a)},ticked:Array,expanded:Array,selected:{},noSelectionUnset:Boolean,defaultExpandAll:Boolean,accordion:Boolean,filter:String,filterMethod:Function,duration:{},noConnectors:Boolean,noTransition:Boolean,noNodesLabel:String,noResultsLabel:String},emits:["update:expanded","update:ticked","update:selected","lazyLoad","afterShow","afterHide"],setup(a,{slots:E,emit:C}){const{proxy:K}=ze(),{$q:m}=K,T=Qe(a,m),M=w({}),V=w(a.ticked||[]),p=w(a.expanded||[]);let z={};Ae(()=>{z={}});const I=N(()=>`q-tree q-tree--${a.dense===!0?"dense":"standard"}`+(a.noConnectors===!0?" q-tree--no-connectors":"")+(T.value===!0?" q-tree--dark":"")+(a.color!==void 0?` text-${a.color}`:"")),D=N(()=>a.selected!==void 0),H=N(()=>a.icon||m.iconSet.tree.icon),O=N(()=>a.controlColor||a.color),$=N(()=>a.textColor!==void 0?` text-${a.textColor}`:""),ae=N(()=>{const t=a.selectedColor||a.color;return t?` text-${t}`:""}),W=N(()=>a.filterMethod!==void 0?a.filterMethod:(t,r)=>{const e=r.toLowerCase();return t[a.labelKey]&&t[a.labelKey].toLowerCase().indexOf(e)!==-1}),q=N(()=>{const t={},r=(e,n)=>{const i=e.tickStrategy||(n?n.tickStrategy:a.tickStrategy),f=e[a.nodeKey],g=e[a.childrenKey]&&Array.isArray(e[a.childrenKey])&&e[a.childrenKey].length!==0,F=e.disabled!==!0&&D.value===!0&&e.selectable!==!1,_=e.disabled!==!0&&e.expandable!==!1,Ke=i!=="none",J=i==="strict",pe=i==="leaf-filtered",ne=i==="leaf"||i==="leaf-filtered";let se=e.disabled!==!0&&e.tickable!==!1;ne===!0&&se===!0&&n&&n.tickable!==!0&&(se=!1);let P=e.lazy;P===!0&&M.value[f]!==void 0&&Array.isArray(e[a.childrenKey])===!0&&(P=M.value[f]);const c={key:f,parent:n,isParent:g,lazy:P,disabled:e.disabled,link:e.disabled!==!0&&(F===!0||_===!0&&(g===!0||P===!0)),children:[],matchesFilter:a.filter?W.value(e,a.filter):!0,selected:f===a.selected&&F===!0,selectable:F,expanded:g===!0?p.value.includes(f):!1,expandable:_,noTick:e.noTick===!0||J!==!0&&P&&P!=="loaded",tickable:se,tickStrategy:i,hasTicking:Ke,strictTicking:J,leafFilteredTicking:pe,leafTicking:ne,ticked:J===!0?V.value.includes(f):g===!0?!1:V.value.includes(f)};if(t[f]=c,g===!0&&(c.children=e[a.childrenKey].map(b=>r(b,c)),a.filter&&(c.matchesFilter!==!0?c.matchesFilter=c.children.some(b=>b.matchesFilter):c.noTick!==!0&&c.disabled!==!0&&c.tickable===!0&&pe===!0&&c.children.every(b=>b.matchesFilter!==!0||b.noTick===!0||b.tickable!==!0)===!0&&(c.tickable=!1)),c.matchesFilter===!0&&(c.noTick!==!0&&J!==!0&&c.children.every(b=>b.noTick)===!0&&(c.noTick=!0),ne))){if(c.ticked=!1,c.indeterminate=c.children.some(b=>b.indeterminate===!0),c.tickable=c.tickable===!0&&c.children.some(b=>b.tickable),c.indeterminate!==!0){const b=c.children.reduce((xe,Te)=>Te.ticked===!0?xe+1:xe,0);b===c.children.length?c.ticked=!0:b>0&&(c.indeterminate=!0)}c.indeterminate===!0&&(c.indeterminateNextState=c.children.every(b=>b.tickable!==!0||b.ticked!==!0))}return c};return a.nodes.forEach(e=>r(e,null)),t});ke(()=>a.ticked,t=>{V.value=t}),ke(()=>a.expanded,t=>{p.value=t});function B(t){const r=[].reduce,e=(n,i)=>{if(n||!i)return n;if(Array.isArray(i)===!0)return r.call(Object(i),e,n);if(i[a.nodeKey]===t)return i;if(i[a.childrenKey])return e(null,i[a.childrenKey])};return e(null,a.nodes)}function le(){return V.value.map(t=>B(t))}function re(){return p.value.map(t=>B(t))}function ie(t){return t&&q.value[t]?q.value[t].expanded:!1}function X(){a.expanded!==void 0?C("update:expanded",[]):p.value=[]}function Y(){const t=[],r=e=>{e[a.childrenKey]&&e[a.childrenKey].length!==0&&e.expandable!==!1&&e.disabled!==!0&&(t.push(e[a.nodeKey]),e[a.childrenKey].forEach(r))};a.nodes.forEach(r),a.expanded!==void 0?C("update:expanded",t):p.value=t}function G(t,r,e=B(t),n=q.value[t]){if(n.lazy&&n.lazy!=="loaded"){if(n.lazy==="loading")return;M.value[t]="loading",Array.isArray(e[a.childrenKey])!==!0&&(e[a.childrenKey]=[]),C("lazyLoad",{node:e,key:t,done:i=>{M.value[t]="loaded",e[a.childrenKey]=Array.isArray(i)===!0?i:[],Me(()=>{const f=q.value[t];(f==null?void 0:f.isParent)===!0&&Z(t,!0)})},fail:()=>{delete M.value[t],e[a.childrenKey].length===0&&delete e[a.childrenKey]}})}else n.isParent===!0&&n.expandable===!0&&Z(t,r)}function Z(t,r){let e=p.value;const n=a.expanded!==void 0;if(n===!0&&(e=e.slice()),r){if(a.accordion&&q.value[t]){const i=[];q.value[t].parent?q.value[t].parent.children.forEach(f=>{f.key!==t&&f.expandable===!0&&i.push(f.key)}):a.nodes.forEach(f=>{const g=f[a.nodeKey];g!==t&&i.push(g)}),i.length!==0&&(e=e.filter(f=>i.includes(f)===!1))}e=e.concat([t]).filter((i,f,g)=>g.indexOf(i)===f)}else e=e.filter(i=>i!==t);n===!0?C("update:expanded",e):p.value=e}function u(t){return t&&q.value[t]?q.value[t].ticked:!1}function l(t,r){let e=V.value;const n=a.ticked!==void 0;n===!0&&(e=e.slice()),r?e=e.concat(t).filter((i,f,g)=>g.indexOf(i)===f):e=e.filter(i=>t.includes(i)===!1),n===!0&&C("update:ticked",e)}function v(t,r,e){const n={tree:K,node:t,key:e,color:a.color,dark:T.value};return qe(n,"expanded",()=>r.expanded,i=>{i!==r.expanded&&G(e,i)}),qe(n,"ticked",()=>r.ticked,i=>{i!==r.ticked&&l([e],i)}),n}function S(t){return(a.filter?t.filter(r=>q.value[r[a.nodeKey]].matchesFilter):t).map(r=>Ne(r))}function y(t){if(t.icon!==void 0)return h(Q,{class:"q-tree__icon q-mr-sm",name:t.icon,color:t.iconColor});const r=t.img||t.avatar;if(r)return h("img",{class:`q-tree__${t.img?"img":"avatar"} q-mr-sm`,src:r})}function x(){C("afterShow")}function Ie(){C("afterHide")}function Ne(t){const r=t[a.nodeKey],e=q.value[r],n=t.header&&E[`header-${t.header}`]||E["default-header"],i=e.isParent===!0?S(t[a.childrenKey]):[],f=i.length!==0||e.lazy&&e.lazy!=="loaded";let g=t.body&&E[`body-${t.body}`]||E["default-body"];const F=n!==void 0||g!==void 0?v(t,e,r):null;return g!==void 0&&(g=h("div",{class:"q-tree__node-body relative-position"},[h("div",{class:$.value},[g(F)])])),h("div",{key:r,class:`q-tree__node relative-position q-tree__node--${f===!0?"parent":"child"}`},[h("div",{class:"q-tree__node-header relative-position row no-wrap items-center"+(e.link===!0?" q-tree__node--link q-hoverable q-focusable":"")+(e.selected===!0?" q-tree__node--selected":"")+(e.disabled===!0?" q-tree__node--disabled":""),tabindex:e.link===!0?0:-1,ariaExpanded:i.length>0?e.expanded:null,role:"treeitem",onClick:_=>{he(t,e,_)},onKeypress(_){Re(_)!==!0&&(_.keyCode===13?he(t,e,_,!0):_.keyCode===32&&oe(t,e,_,!0))}},[h("div",{class:"q-focus-helper",tabindex:-1,ref:_=>{z[e.key]=_}}),e.lazy==="loading"?h($e,{class:"q-tree__spinner",color:O.value}):f===!0?h(Q,{class:"q-tree__arrow"+(e.expanded===!0?" q-tree__arrow--rotate":""),name:H.value,onClick(_){oe(t,e,_)}}):null,e.hasTicking===!0&&e.noTick!==!0?h(Be,{class:"q-tree__tickbox",modelValue:e.indeterminate===!0?null:e.ticked,color:O.value,dark:T.value,dense:!0,keepColor:!0,disable:e.tickable!==!0,onKeydown:_e,"onUpdate:modelValue":_=>{Ee(e,_)}}):null,h("div",{class:"q-tree__node-header-content col row no-wrap items-center"+(e.selected===!0?ae.value:$.value)},[n?n(F):[y(t),h("div",t[a.labelKey])]])]),f===!0?a.noTransition===!0?e.expanded===!0?h("div",{class:"q-tree__node-collapsible"+$.value,key:`${r}__q`},[g,h("div",{class:"q-tree__children"+(e.disabled===!0?" q-tree__node--disabled":""),role:"group"},i)]):null:h(Je,{duration:a.duration,onShow:x,onHide:Ie},()=>Fe(h("div",{class:"q-tree__node-collapsible"+$.value,key:`${r}__q`},[g,h("div",{class:"q-tree__children"+(e.disabled===!0?" q-tree__node--disabled":""),role:"group"},i)]),[[Pe,e.expanded]])):g])}function be(t){var r;(r=z[t])==null||r.focus()}function he(t,r,e,n){n!==!0&&r.selectable!==!1&&be(r.key),D.value&&r.selectable?a.noSelectionUnset===!1?C("update:selected",r.key!==a.selected?r.key:null):r.key!==a.selected&&C("update:selected",r.key===void 0?null:r.key):oe(t,r,e,n),typeof t.handler=="function"&&t.handler(t)}function oe(t,r,e,n){e!==void 0&&_e(e),n!==!0&&r.selectable!==!1&&be(r.key),G(r.key,!r.expanded,t,r)}function Ee(t,r){if(t.indeterminate===!0&&(r=t.indeterminateNextState),t.strictTicking)l([t.key],r);else if(t.leafTicking){const e=[],n=i=>{i.isParent?(r!==!0&&i.noTick!==!0&&i.tickable===!0&&e.push(i.key),i.leafTicking===!0&&i.children.forEach(n)):i.noTick!==!0&&i.tickable===!0&&(i.leafFilteredTicking!==!0||i.matchesFilter===!0)&&e.push(i.key)};n(t),l(e,r)}}return a.defaultExpandAll===!0&&Y(),Object.assign(K,{getNodeByKey:B,getTickedNodes:le,getExpandedNodes:re,isExpanded:ie,collapseAll:X,expandAll:Y,setExpanded:G,isTicked:u,setTicked:l}),()=>{const t=S(a.nodes);return h("div",{class:I.value,role:"tree"},t.length===0?a.filter?a.noResultsLabel||m.lang.tree.noResults:a.noNodesLabel||m.lang.tree.noNodes:t)}}}),ot='<circle cx="15" cy="15" r="15"><animate attributeName="r" from="15" to="15" begin="0s" dur="0.8s" values="15;9;15" calcMode="linear" repeatCount="indefinite"></animate><animate attributeName="fill-opacity" from="1" to="1" begin="0s" dur="0.8s" values="1;.5;1" calcMode="linear" repeatCount="indefinite"></animate></circle><circle cx="60" cy="15" r="9" fill-opacity=".3"><animate attributeName="r" from="9" to="9" begin="0s" dur="0.8s" values="9;15;9" calcMode="linear" repeatCount="indefinite"></animate><animate attributeName="fill-opacity" from=".5" to=".5" begin="0s" dur="0.8s" values=".5;1;.5" calcMode="linear" repeatCount="indefinite"></animate></circle><circle cx="105" cy="15" r="15"><animate attributeName="r" from="15" to="15" begin="0s" dur="0.8s" values="15;9;15" calcMode="linear" repeatCount="indefinite"></animate><animate attributeName="fill-opacity" from="1" to="1" begin="0s" dur="0.8s" values="1;.5;1" calcMode="linear" repeatCount="indefinite"></animate></circle>',nt=we({name:"QSpinnerDots",props:Ue,setup(a){const{cSize:E,classes:C}=Le(a);return()=>h("svg",{class:C.value,fill:"currentColor",width:E.value,height:E.value,viewBox:"0 0 120 30",xmlns:"http://www.w3.org/2000/svg",innerHTML:ot})}}),st={class:"row items-center q-gutter-sm"},ct={class:"row q-col-gutter-md"},dt={class:"col-12 col-md-4"},ut={class:"row items-center q-gutter-sm"},ft={key:0,class:"q-pa-md bg-blue-1 rounded-borders"},vt={class:"row items-center q-gutter-md"},mt={class:"text-body2 text-grey-9"},yt={class:"text-caption text-grey-7"},gt={class:"form-group"},bt={class:"row q-gutter-sm justify-end q-mt-md"},ht={class:"col-12 col-md-8"},pt={class:"row items-center justify-between"},xt={class:"row items-center q-gutter-sm"},kt={key:0,class:"text-center q-pa-xl"},_t={key:1},qt={class:"row items-center q-gutter-xs"},Ct={key:2,class:"text-center q-pa-xl"},St={__name:"GestionVistas",setup(a){const E=je(),C=at();w({});const K=w({}),m=w({NombreCompleto:"",Identificacion:"",IdRol:null}),T=w([]),M=w({}),V=w([]),p=w(null),z=w([]),I=w([]),D=w(!1);let H=null;const O=u=>{if(!u){m.value={IdRol:null};return}m.value=u},$=async(u,l,v)=>{if(u===""||u.length<2){v(),T.value=[];return}clearTimeout(H),H=setTimeout(async()=>{try{const S={Filtro:u,IdEmpresa:K.value.IdEmpresa},y=await j.post("usuario/usuarios",S);l(()=>{T.value=y.data||[]})}catch(S){console.error("Error al filtrar usuarios:",S),l(()=>{T.value=[]})}},500)},ae=async()=>{if(!m.value||!M.value){k.notificacion("Por favor completa todos los campos",!1);return}if(await k.cofirmarAccion("¿Está seguro de cambiar el rol del usuario?",null)){k.loadingNotify(!0,"Actualizando rol...");try{const l=await j.post("usuario/modificar",m.value);k.notificacion(l.data.Mensaje,l.data.IsExito),l.data.IsExito&&W()}catch(l){console.error("Error al actualizar usuario",l),k.notificacion("Error al actualizar el rol del usuario",!1)}finally{k.loadingNotify(!1)}}},W=()=>{m.value="",T.value=[]},q=u=>u.map(l=>{const v=(l.Vistas||[]).map(y=>({label:y.NombreVista,IdVista:y.IdVista,body:"Vista",Icon:y.Icono,uniqueKey:`vista-${y.IdVista}`})),S=(l.Menus||[]).map(y=>({label:y.Nombre,body:"Menu",Icon:y.Icono,uniqueKey:`menu-${y.IdMenu||y.Nombre||Math.random()}`,children:q([y])}));return{IdMenu:l.IdMenu,label:l.Nombre,Icon:l.Icono,body:"Menu",uniqueKey:`menu-${l.IdMenu}`,children:[...S,...v]}});N(()=>q(z.value));const B=N(()=>!z.value||z.value.length===0?[]:[{label:"Menú Principal del Sistema",Icon:"dashboard",body:"Root",isRoot:!0,uniqueKey:"root-menu-principal",children:q(z.value)}]),le=async()=>{if(K.value.IdEmpresa){k.loadingNotify(!0,"Cargando vistas...");try{const u=await j.get("usuario/menus/sistema");z.value=u.data,D.value=!0,k.loadingNotify(!1,"")}catch(u){console.error("Error al traer el menú",u),k.loadingNotify(!1,"")}}},re=async u=>{if(!u){I.value=[];return}k.loadingNotify(!0,"Cargando vistas");try{const l=await j.get(`usuario/${u}/rol/${K.value.IdEmpresa}/empresa`);I.value=l.data.map(v=>`vista-${v.IdVista}`),k.loadingNotify(!1,"")}catch(l){console.error(l),k.loadingNotify(!1,"")}},ie=async()=>{if(!p.value){k.notificacion("Por favor seleccione un Rol",!1);return}const u=I.value.length===0?"¿Está seguro de guardar los Accesos seleccionados?":"¿Está seguro de modificar los Accesos seleccionados?";if(await k.cofirmarAccion(u,null)){C.loading.show();try{const v=I.value.filter(x=>x.startsWith("vista-")).map(x=>parseInt(x.replace("vista-",""))).filter(x=>!isNaN(x)),S={IdRol:p.value,Vistas:v,IdEmpresa:K.value.IdEmpresa},y=await j.post("usuario/actualizarvistas",S,{headers:{"Content-Type":"application/json"}});k.notificacion(y.data.Mensaje,y.data.IsExito),y.data.IsExito&&X()}catch(v){console.error("Error al actualizar las vistas",v),k.notificacion("Error al actualizar las vistas",!1)}finally{C.loading.hide()}}},X=()=>{p.value=null,I.value=[]},Y=async()=>{var u;if((u=K.value)!=null&&u.IdEmpresa)try{const l=await j.get("usuario/rol");V.value=l.data}catch(l){console.error("Error al traer roles",l)}},G=N(()=>I.value.length>0?"Modificar":"Guardar"),Z=N(()=>"primary");return De(()=>{k.datoUsuario().then(u=>{if(u===null){E.push("/login");return}K.value=u,Y(),le()}).catch(u=>{console.log(u)})}),(u,l)=>(R(),ce(tt,{style:{height:"calc(100vh - 60px)",overflow:"auto","background-color":"#EBEBF0"},class:"q-pa-sm"},{default:d(()=>[o(de,{flat:"",bordered:"",class:"q-mb-md"},{default:d(()=>[o(U,{class:"bg-blue-grey-3 text-white q-pa-md"},{default:d(()=>[s("div",st,[o(ue,{size:"56px",color:"white","text-color":"primary"},{default:d(()=>[o(Q,{name:"admin_panel_settings",size:"32px"})]),_:1}),l[7]||(l[7]=s("div",null,[s("div",{class:"text-h5 text-grey-9"},"Gestión de Vistas y Roles"),s("div",{class:"text-caption text-grey-9"},"Administra permisos y accesos del sistema")],-1))])]),_:1})]),_:1}),s("div",ct,[s("div",dt,[o(de,{flat:"",bordered:""},{default:d(()=>[o(U,{class:"bg-blue-grey-3 text-white"},{default:d(()=>[s("div",ut,[o(Q,{name:"person_add",color:"grey-9",size:"24px"}),l[8]||(l[8]=s("div",null,[s("div",{class:"text-subtitle2 text-grey-9"},"Asignar Rol"),s("div",{class:"text-caption text-grey-9"},"Cambiar rol de usuario")],-1))])]),_:1}),o(fe),o(U,{class:"q-pa-md"},{default:d(()=>[o(Ze,{onSubmit:Ge(ae,["prevent"]),class:"q-gutter-md"},{default:d(()=>{var v,S,y;return[s("div",null,[l[10]||(l[10]=s("div",{class:"text-caption text-grey-9 text-grey-8 q-mb-xs"}," Usuario ",-1)),o(ge,{outlined:"","onUpdate:modelValue":[O,l[0]||(l[0]=x=>m.value=x)],modelValue:m.value,placeholder:"Buscar por nombre o identificación","option-value":"Idusuario","option-label":"NombreCompleto",options:T.value,"use-input":"",onFilter:$,clearable:"","hide-bottom-space":"",behavior:"menu"},{option:d(x=>[o(Ce,He(Oe(x.itemProps)),{default:d(()=>[o(me,{avatar:""},{default:d(()=>[o(ue,{color:"primary","text-color":"white",size:"40px"},{default:d(()=>[o(Q,{name:"person"})]),_:1})]),_:1}),o(me,null,{default:d(()=>[o(ye,{class:"text-weight-medium"},{default:d(()=>[L(A(x.opt.NombreCompleto),1)]),_:2},1024),o(ye,{caption:""},{default:d(()=>[L("ID: "+A(x.opt.Identificacion),1)]),_:2},1024),o(ye,{caption:"",class:"text-grey-8"},{default:d(()=>[L(A(x.opt.Rol||"Sin rol asignado"),1)]),_:2},1024)]),_:2},1024)]),_:2},1040)]),"no-option":d(()=>[o(Ce,null,{default:d(()=>[o(me,{class:"text-grey text-center"},{default:d(()=>[o(Q,{name:"search_off",size:"md",class:"q-mb-sm"}),l[9]||(l[9]=s("div",{class:"text-caption"},"Escribe para buscar usuarios...",-1))]),_:1})]),_:1})]),_:1},8,["modelValue","options"])]),(v=m.value)!=null&&v.NombreCompleto?(R(),ee("div",ft,[s("div",vt,[o(ue,{color:"primary","text-color":"white",size:"48px"},{default:d(()=>[o(Q,{name:"person",size:"28px"})]),_:1}),s("div",null,[s("div",mt,A(m.value.NombreCompleto),1),s("div",yt,A(m.value.Identificacion),1),o(Se,{outline:"",color:"primary",class:"q-mt-xs"},{default:d(()=>[L(A(m.value.Rol||"Sin rol"),1)]),_:1})])])])):ve("",!0),s("div",gt,[l[11]||(l[11]=s("label",{class:"form-label"}," Nuevo Rol ",-1)),o(ge,{outlined:"",modelValue:m.value.IdRol,"onUpdate:modelValue":l[1]||(l[1]=x=>m.value.IdRol=x),placeholder:"Seleccionar rol","option-label":"Nombre","option-value":"IdRol",options:V.value,disable:!((S=m.value)!=null&&S.NombreCompleto),"hide-bottom-space":"",clearable:"","emit-value":"","map-options":"",behavior:"menu"},null,8,["modelValue","options","disable"])]),s("div",bt,[o(te,{flat:"",label:"Cancelar",color:"grey-8",onClick:l[2]||(l[2]=x=>W()),icon:"close"}),o(te,{unelevated:"",type:"submit",label:"Guardar Cambios",color:"primary",icon:"save",disable:!((y=m.value)!=null&&y.NombreCompleto)||!m.value.IdRol},null,8,["disable"])])]}),_:1})]),_:1})]),_:1})]),s("div",ht,[o(de,{flat:"",bordered:""},{default:d(()=>[o(U,{class:"bg-blue-grey-3 text-white"},{default:d(()=>[s("div",pt,[s("div",xt,[o(Q,{name:"account_tree",color:"grey-9",size:"24px"}),l[12]||(l[12]=s("div",null,[s("div",{class:"text-subtitle2 text-grey-9"},"Configuración de Vistas"),s("div",{class:"text-caption text-grey-9"},"Asigna permisos de acceso por rol")],-1))]),p.value&&I.value.length>0?(R(),ce(Ye,{key:0,color:"white","text-color":"primary",icon:"check_circle"},{default:d(()=>[L(A(I.value.length)+" seleccionadas ",1)]),_:1})):ve("",!0)])]),_:1}),o(fe),o(U,{class:"q-pa-md"},{default:d(()=>[s("div",null,[l[13]||(l[13]=s("div",{class:"text-caption text-grey-9 text-grey-8 q-mb-xs"}," Seleccionar Rol para Configurar Vistas ",-1)),o(ge,{outlined:"",modelValue:p.value,"onUpdate:modelValue":[l[3]||(l[3]=v=>p.value=v),re],placeholder:"Elige un rol para configurar sus vistas","emit-value":"","map-options":"","option-value":"IdRol","option-label":"Nombre",options:V.value,clearable:"",behavior:"menu"},null,8,["modelValue","options"])])]),_:1}),o(U,{style:{"min-height":"450px"}},{default:d(()=>[p.value?D.value?(R(),ee("div",_t,[o(et,{style:{height:"500px"}},{default:d(()=>[o(it,{color:"",nodes:B.value,ticked:I.value,"onUpdate:ticked":l[4]||(l[4]=v=>I.value=v),"node-key":"uniqueKey","tick-strategy":"leaf","default-expand-all":"",class:"q-pa-sm"},{"default-header":d(v=>[s("div",qt,[s("div",{class:We(["text-grey-9",{"text-grey-9":v.node.isRoot||v.node.body==="Menu"}])},A(v.node.label||"Sin nombre"),3),v.node.isRoot?(R(),ce(Se,{key:0,color:"primary","text-color":"white"},{default:d(()=>[...l[16]||(l[16]=[L(" Menú Principal ",-1)])]),_:1})):ve("",!0)])]),_:1},8,["nodes","ticked"])]),_:1})])):(R(),ee("div",Ct,[o(nt,{color:"primary",size:"50px"}),l[17]||(l[17]=s("p",{class:"text-body2 text-grey-6 q-mt-md"},"Cargando vistas del sistema...",-1))])):(R(),ee("div",kt,[o(Q,{name:"account_tree",size:"80px",color:"grey-4"}),l[14]||(l[14]=s("div",{class:"text-h6 text-grey-6 q-mt-md"},"Selecciona un Rol",-1)),l[15]||(l[15]=s("p",{class:"text-body2 text-grey-6"},"Para configurar las vistas disponibles, primero selecciona un rol del menú superior",-1))]))]),_:1}),o(fe),o(Xe,{align:"right",class:"q-pa-md bg-grey-1"},{default:d(()=>[o(te,{flat:"",label:"Limpiar Selección",color:"grey-8",onClick:l[5]||(l[5]=v=>X()),icon:"clear_all",disable:!p.value},null,8,["disable"]),o(te,{unelevated:"",label:G.value,color:Z.value,icon:"save",onClick:l[6]||(l[6]=v=>ie()),disable:!p.value},null,8,["label","color","disable"])]),_:1})]),_:1})])])]),_:1}))}},Ut=lt(St,[["__scopeId","data-v-32b86972"]]);export{Ut as default};
