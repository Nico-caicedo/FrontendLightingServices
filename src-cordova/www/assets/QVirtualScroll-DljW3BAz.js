import{Q as F}from"./QList-BWY4JASi.js";import{Q as z}from"./QMarkupTable-DvZ2xV1r.js";import{h as s,A,b1 as M,r as E,c as i,w as b,b2 as L,b0 as T,bd as p,o as x,aK as R,aJ as w,D as B,aa as C}from"./index-DD84rciS.js";import{u as D,d as O}from"./QSelect-D9KbhcM8.js";function P(e,t){return s("div",e,[s("table",{class:"q-table"},t)])}const k={list:F,table:z},H=["list","table","__qtable"],U=A({name:"QVirtualScroll",props:{...D,type:{type:String,default:"list",validator:e=>H.includes(e)},items:{type:Array,default:()=>[]},itemsFn:Function,itemsSize:Number,scrollTarget:M},setup(e,{slots:t,attrs:v}){let l;const o=E(null),n=i(()=>e.itemsSize>=0&&e.itemsFn!==void 0?parseInt(e.itemsSize,10):Array.isArray(e.items)?e.items.length:0),{virtualScrollSliceRange:r,localResetVirtualScroll:d,padVirtualScroll:y,onVirtualScrollEvt:f}=O({virtualScrollLength:n,getVirtualScrollTarget:Q,getVirtualScrollEl:g}),V=i(()=>{if(n.value===0)return[];const a=(_,q)=>({index:r.value.from+q,item:_});return e.itemsFn===void 0?e.items.slice(r.value.from,r.value.to).map(a):e.itemsFn(r.value.from,r.value.to-r.value.from).map(a)}),m=i(()=>"q-virtual-scroll q-virtual-scroll"+(e.virtualScrollHorizontal===!0?"--horizontal":"--vertical")+(e.scrollTarget!==void 0?"":" scroll")),h=i(()=>e.scrollTarget!==void 0?{}:{tabindex:0});b(n,()=>{d()}),b(()=>e.scrollTarget,()=>{u(),c()});function g(){return o.value.$el||o.value}function Q(){return l}function c(){l=L(g(),e.scrollTarget),l.addEventListener("scroll",f,T.passive)}function u(){l!==void 0&&(l.removeEventListener("scroll",f,T.passive),l=void 0)}function S(){let a=y(e.type==="list"?"div":"tbody",V.value.map(t.default));return t.before!==void 0&&(a=t.before().concat(a)),C(t.after,a)}return p(()=>{d()}),x(()=>{c()}),R(()=>{c()}),w(()=>{u()}),B(()=>{u()}),()=>{if(t.default===void 0){console.error("QVirtualScroll: default scoped slot is required for rendering");return}return e.type==="__qtable"?P({ref:o,class:"q-table__middle "+m.value},S()):s(k[e.type],{...v,ref:o,class:[v.class,m.value],...h.value},S)}}});export{U as Q,P as g};
