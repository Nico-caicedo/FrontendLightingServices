import{r as d,c as M,k as y,l as k,m as i,f as l,Q as w,n as s,x as c,t as m,v as P,a4 as S,p as x,_ as z,y as I,X as B,ab as D,S as N}from"./index-DD84rciS.js";import{Q as v}from"./QSelect-D9KbhcM8.js";import{Q as _}from"./QTd-Bq4iPcoX.js";import{Q as j}from"./QTable-B6mhboVn.js";import{Q as $}from"./QPage-BB2Um8dJ.js";import{C as E}from"./ClosePopup-CT1KP1o0.js";import{_ as H}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./QItemLabel-Y1e7J-9n.js";import"./format-DyQxkAtJ.js";import"./QVirtualScroll-DljW3BAz.js";import"./QList-BWY4JASi.js";import"./QMarkupTable-DvZ2xV1r.js";const O={class:"row items-center justify-between q-mb-md"},T={class:"filters row q-col-gutter-md q-pa-sm q-mb-md bg-grey-1 rounded-borders"},F={class:"column items-center q-pa-lg text-grey-6",style:{"min-height":"160px"}},R={class:"q-gutter-md"},W={__name:"InventarioPage",setup(G){const f=["Luminarias","Collarines","Brazos","Fotoceldas","Cableado","Herrajes","Otros"],b=["Assic – Nautilus","Alutrafic","Celsa","Imporled","Mercury","RoyAlpha","Sylvania"],t=d({busqueda:"",categoria:null,marca:null}),n=d([{id:1,codigo:"LUM100",nombre:"Luminaria LED 100W",categoria:"Luminarias",marca:"RoyAlpha",stock:25,precio:18e4},{id:2,codigo:"COL015",nombre:"Collarín galvanizado 1.5”",categoria:"Herrajes",marca:null,stock:10,precio:9500},{id:3,codigo:"LUM102",nombre:"Luminaria LED 50W",categoria:"Luminarias",marca:"Sylvania",stock:25,precio:18e4},{id:4,codigo:"COL016",nombre:"Collarín galvanizado 2.0”",categoria:"Herrajes",marca:null,stock:50,precio:9500}]),L=[{name:"codigo",label:"Código",field:"codigo",align:"left"},{name:"nombre",label:"Material",field:"nombre",align:"left"},{name:"categoria",label:"Categoría",field:"categoria",align:"left"},{name:"marca",label:"Marca",field:"marca",align:"left"},{name:"stock",label:"Stock",field:"stock",align:"center"},{name:"precio",label:"Costo Unitario",field:"precio",align:"right",format:r=>`$${r.toLocaleString()}`},{name:"acciones",label:"Acciones",align:"center"}],V=d({rowsPerPage:10}),C=M(()=>n.value.filter(r=>{const e=r.nombre.toLowerCase().includes(t.value.busqueda.toLowerCase())||r.codigo.toLowerCase().includes(t.value.busqueda.toLowerCase()),a=!t.value.categoria||r.categoria===t.value.categoria,p=!t.value.marca||r.marca===t.value.marca;return e&&a&&p})),u=d(!1),o=d({}),g=d(!1),Q=()=>{o.value={nombre:"",codigo:"",categoria:"",marca:null,stock:0,precio:0},g.value=!1,u.value=!0},q=r=>{o.value={...r},g.value=!0,u.value=!0},U=()=>{if(g.value){const r=n.value.findIndex(e=>e.id===o.value.id);r!==-1&&(n.value[r]={...o.value})}else o.value.id=Date.now(),n.value.push({...o.value});u.value=!1},A=r=>{n.value=n.value.filter(e=>e.id!==r.id)};return(r,e)=>(k(),y($,{class:"q-pa-md bg-grey-2"},{default:i(()=>[l(w,{flat:"",bordered:"",class:"q-pa-md inv-card"},{default:i(()=>[s("div",O,[e[10]||(e[10]=s("div",{class:"text-h5 text-primary"}," Inventario de Materiales ",-1)),l(c,{color:"primary",icon:"add",label:"Agregar material",onClick:Q,unelevated:""})]),s("div",T,[l(m,{filled:"",modelValue:t.value.busqueda,"onUpdate:modelValue":e[0]||(e[0]=a=>t.value.busqueda=a),label:"Buscar por nombre o código",dense:"",class:"col-12 col-md-4"},null,8,["modelValue"]),l(v,{filled:"",modelValue:t.value.categoria,"onUpdate:modelValue":e[1]||(e[1]=a=>t.value.categoria=a),options:f,label:"Categoría",dense:"",clearable:"",class:"col-12 col-md-3"},null,8,["modelValue"]),l(v,{filled:"",modelValue:t.value.marca,"onUpdate:modelValue":e[2]||(e[2]=a=>t.value.marca=a),options:b,label:"Marca",dense:"",clearable:"",class:"col-12 col-md-3"},null,8,["modelValue"])]),l(j,{rows:C.value,columns:L,"row-key":"id",flat:"",bordered:"",dense:"",grid:!1,separator:"horizontal","rows-per-page-options":[5,10,20,50],pagination:V.value,class:"inv-table","wrap-cells":"","hide-bottom":C.value.length<=V.value.rowsPerPage,"virtual-scroll":"","virtual-scroll-item-size":52},{"body-cell-acciones":i(a=>[l(_,{align:"center"},{default:i(()=>[l(c,{icon:"edit",size:"sm",color:"primary",flat:"",round:"",onClick:p=>q(a.row)},null,8,["onClick"]),l(c,{icon:"delete",size:"sm",color:"negative",flat:"",round:"",onClick:p=>A(a.row)},null,8,["onClick"])]),_:2},1024)]),"no-data":i(()=>[s("div",F,[l(P,{name:"inventory_2",size:"48px",class:"q-mb-sm"}),e[11]||(e[11]=s("div",{class:"text-subtitle2"},"Sin resultados",-1)),e[12]||(e[12]=s("div",{class:"text-caption"},"Ajusta los filtros o agrega un material.",-1))])]),_:1},8,["rows","pagination","hide-bottom"])]),_:1}),l(S,{modelValue:u.value,"onUpdate:modelValue":e[9]||(e[9]=a=>u.value=a),persistent:""},{default:i(()=>[l(w,{style:{"min-width":"400px"}},{default:i(()=>[l(x,{class:"text-h6"},{default:i(()=>[z(I(g.value?"Editar material":"Agregar material"),1)]),_:1}),l(x,null,{default:i(()=>[s("div",R,[l(m,{modelValue:o.value.nombre,"onUpdate:modelValue":e[3]||(e[3]=a=>o.value.nombre=a),label:"Nombre del material",filled:"",dense:""},null,8,["modelValue"]),l(m,{modelValue:o.value.codigo,"onUpdate:modelValue":e[4]||(e[4]=a=>o.value.codigo=a),label:"Código",filled:"",dense:""},null,8,["modelValue"]),l(v,{modelValue:o.value.categoria,"onUpdate:modelValue":e[5]||(e[5]=a=>o.value.categoria=a),options:f,label:"Categoría",filled:"",dense:""},null,8,["modelValue"]),o.value.categoria==="Luminarias"?(k(),y(v,{key:0,modelValue:o.value.marca,"onUpdate:modelValue":e[6]||(e[6]=a=>o.value.marca=a),options:b,label:"Marca",filled:"",dense:""},null,8,["modelValue"])):B("",!0),l(m,{modelValue:o.value.stock,"onUpdate:modelValue":e[7]||(e[7]=a=>o.value.stock=a),modelModifiers:{number:!0},label:"Stock disponible",type:"number",filled:"",dense:""},null,8,["modelValue"]),l(m,{modelValue:o.value.precio,"onUpdate:modelValue":e[8]||(e[8]=a=>o.value.precio=a),modelModifiers:{number:!0},label:"Costo unitario",prefix:"$",type:"number",filled:"",dense:""},null,8,["modelValue"])])]),_:1}),l(D,{align:"right"},{default:i(()=>[N(l(c,{flat:"",label:"Cancelar",color:"grey"},null,512),[[E]]),l(c,{color:"primary",label:"Guardar",onClick:U})]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1}))}},ie=H(W,[["__scopeId","data-v-60e14fc7"]]);export{ie as default};
